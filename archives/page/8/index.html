<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>Archives | Brian&#39;s Blog</title>
  <meta name="viewport" content="width=device-width">
  <meta name="description" content="Why do you ask my name? It is beyond understanding.">
<meta property="og:type" content="website">
<meta property="og:title" content="Brian's Blog">
<meta property="og:url" content="http://blog.ohai.ca/archives/page/8/index.html">
<meta property="og:site_name" content="Brian's Blog">
<meta property="og:description" content="Why do you ask my name? It is beyond understanding.">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Brian's Blog">
<meta name="twitter:description" content="Why do you ask my name? It is beyond understanding.">
  
    <link rel="alternative" href="/atom.xml" title="Brian&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="../../../css/style.css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]--><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  
</head>
<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <div class="mobile-nav-panel">
	<i class="icon-reorder icon-large"></i>
</div>
<header id="header">
	<h1 class="blog-title">
		<a href="/">Brian&#39;s Blog</a>
	</h1>
	<nav class="nav">
		<ul>
			<li><a href="/">Home</a></li><li><a href="/archives">Archives</a></li>
			<li><a id="nav-search-btn" class="nav-icon" title="Search"></a></li>
			<li><a href="/atom.xml" id="nav-rss-link" class="nav-icon" title="RSS Feed"></a></li>
		</ul>
	</nav>
	<div id="search-form-wrap">
		<form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://blog.ohai.ca"></form>
	</div>
</header>
    <div id="main">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="../../../tags/AWS/">AWS</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../../tags/Access/">Access</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../../tags/Accessibility/">Accessibility</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../../tags/Android/">Android</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../../tags/Apple/">Apple</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../../tags/Business/">Business</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../../tags/Cars/">Cars</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../../tags/Chemistry/">Chemistry</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../../tags/CoffeeScript/">CoffeeScript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../../tags/Firearms/">Firearms</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../../tags/General/">General</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../../tags/HTML/">HTML</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../../tags/Java/">Java</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../../tags/JavaScript/">JavaScript</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../../tags/Learning/">Learning</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../../tags/Lifestyle/">Lifestyle</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../../tags/Linguistics/">Linguistics</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../../tags/Linux/">Linux</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../../tags/Machine-Learning/">Machine Learning</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../../tags/Medicals/">Medicals</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../../tags/Meta/">Meta</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../../tags/Pokemon/">Pokemon</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../../tags/Psychology/">Psychology</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../../tags/PyCon/">PyCon</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../../tags/Python/">Python</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../../tags/QA/">QA</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../../tags/Recipes/">Recipes</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../../tags/Security/">Security</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../../tags/Software-Development/">Software Development</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../../tags/Software-development/">Software development</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../../tags/Startups/">Startups</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../../tags/Travel/">Travel</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../../tags/Tumblr/">Tumblr</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../../tags/Unicode/">Unicode</a><span class="tag-list-count">1</span></li></ul>

  
    <article id="post-Things-my-father-says" class="post">
	<footer class="entry-meta-header">
		<span class="meta-elements date">
			<a href="/2016/Things-my-father-says/" class="article-date">
  <time datetime="2016-08-04T16:28:39.000Z" itemprop="datePublished">2016-08-04</time>
</a>
		</span>
		<span class="meta-elements author">Brian</span>
		<div class="commentscount">
			
		</div>
	</footer>
	
	<header class="entry-header">
		
  
    <h1 itemprop="name" class="entry-title">
      <a class="article-title" href="/2016/Things-my-father-says/">Things My Father Says</a>
    </h1>
  

	</header>
	<div class="entry-content">
		
    	<p>Once I was seven years old, my father told me,<br>“Think before you do” (or I will beat you)<br>Once I was seven years old</p>
<p>It was a big big world, but we (friends) thought we were bigger<br>Pushing each other to the limits, we were learning quicker<br>By eleven memorising poems and playing football<br>Never rich so we were out to make that steady figure</p>
<p>Once I was eleven years old, my father told me,<br>“Go read yourself a [rich dad poor dad book] (or you’ll die poorly).”<br>Once I was eleven years old</p>
<p>I always had that dream, like my father before me<br>So I started picking stocks, I started getting degrees<br>Something about that glory just always seemed to bore me<br>‘Cause only those I really love will ever really know me</p>
<p>Once I was twenty years old, my story got told<br>Before the morning sun, when life was lonely<br>Once I was twenty years old</p>
<p>“Don’t be trapped with a girl before you establish your career”<br>“Smart guy controls his pennis (<em>sic</em>) with his brian (<em>sic</em>) rather the vice versa”<br>I got my boys with me, at least those in favor<br>And if we don’t meet before I leave, I hope I’ll see you later</p>
<p>Once I was twenty years old, my story got told<br>I was forgetting about everything I saw before me<br>Once I was twenty years old</p>
<p>Soon we’ll be thirty years old, our properties have been sold<br>We’ve traveled around the world and we’re still roaming<br>Soon we’ll be thirty years old</p>
<p>I’m still learning about life<br>My woman is still imaginary<br>So I can sing myself some songs<br>And I can make up stories<br>None of my boys are with me<br>They are all out seeking glory<br>And some I had to keep around<br>My brother, I’m so sorry</p>
<p>Soon I’ll be sixty years old, my father gets however old<br>Remember life, and then your life becomes a better one<br>I made a man so happy when I wrote an email once<br>I hope just someone come and visit once or twice a month</p>
<p>Soon I’ll be sixty years old, will I think the world is cold<br>Or will I have a lot of children who can warm me?<br>Soon I’ll be sixty years old</p>
<p>Soon I’ll be sixty years old, will I think the world is cold<br>Or will I have a lot of children who can warm me?<br>Soon I’ll be sixty years old</p>
<p>Once I was seven years old, my father told me,<br>“Think before you do (or I will beat you)”<br>Once I was seven years old</p>
<p>Once I was seven years old </p>

    
	</div>
	<footer class="entry-footer">
		<div class="entry-meta-footer">
			<span class="category">
				
			</span>
			<span class="tags">
				
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../../tags/General/">General</a></li></ul>

			</span>
		</div>
	</footer>
	
</article>


	<hr class="article-devider">



  
    <article id="post-How-to-make-a-freemium-game" class="post">
	<footer class="entry-meta-header">
		<span class="meta-elements date">
			<a href="/2016/How-to-make-a-freemium-game/" class="article-date">
  <time datetime="2016-08-04T14:45:32.000Z" itemprop="datePublished">2016-08-04</time>
</a>
		</span>
		<span class="meta-elements author">Brian</span>
		<div class="commentscount">
			
		</div>
	</footer>
	
	<header class="entry-header">
		
  
    <h1 itemprop="name" class="entry-title">
      <a class="article-title" href="/2016/How-to-make-a-freemium-game/">How to Make a Freemium Game</a>
    </h1>
  

	</header>
	<div class="entry-content">
		
    	<p>Derived from a video by <a href="https://www.youtube.com/watch?v=fKK9nVLvhGM" target="_blank" rel="external">Vox</a>, whose <a href="http://eventbeat.org/how-free-games-are-designed-to-make-money/" target="_blank" rel="external">transcript</a> was found elsewhere.</p>
<h1 id="Dissociate-payments-with-real-money"><a href="#Dissociate-payments-with-real-money" class="headerlink" title="Dissociate payments with real money"></a>Dissociate payments with real money</h1><blockquote>
<p>The first thing these games do is set up a virtual currency so that it doesn’t feel like you’re spending real currency, even though you are.</p>
</blockquote>
<p>Ask users to buy “coins” and “gold” with credit card, and never make the conversion rate easy, like 1 gold: 1 cent. Make it hard for the user to realise how much was actually spent.</p>
<h1 id="Don’t-make-users-feel-like-they-are-paying-with-real-money"><a href="#Don’t-make-users-feel-like-they-are-paying-with-real-money" class="headerlink" title="Don’t make users feel like they are paying with real money"></a>Don’t make users feel like they are paying with real money</h1><blockquote>
<p>People find it harder to spend money when they’re paying in cash than if they’re using a card.</p>
</blockquote>
<p>Require users to pay with a credit card, and force the card to be saved. This makes the user easier to spend money for subsequent impulse buys.<br>Apparently, tourist attractions also do this, because they hold foreign currency with an unfamiliar value.</p>
<h1 id="Make-users-pay-with-virtual-currency"><a href="#Make-users-pay-with-virtual-currency" class="headerlink" title="Make users pay with virtual currency"></a>Make users pay with virtual currency</h1><blockquote>
<p>If incense costs 80 pokecoins and a batch of 550 pokecoins costs $4.99, how much real money does incense cost? Yeah i don’t know either.</p>
</blockquote>
<p>It is hard to determine the amount of money spent <em>and</em> the amount of virtual currency being spent, making micropayments seem virtual to stupid users.<br>Paying with virtual currency also has the advantage of bypassing the credit card.</p>
<h1 id="Make-some-rewards-more-ambiguous-than-others"><a href="#Make-some-rewards-more-ambiguous-than-others" class="headerlink" title="Make some rewards more ambiguous than others"></a>Make some rewards more ambiguous than others</h1><blockquote>
<p>It’s clever how you can only buy Lunchboxes so you don’t know what you’ll get out of them</p>
</blockquote>
<p>Some in-game items are purely gambling. Users will convince themselves than spending 880 Nexon cash (or whatever it’s called) is a good idea for buying a <a href="https://maplewiki.net/index.php?title=Gachapon" target="_blank" rel="external">“Gachapon”</a>, a lottery service that may or may not yield an in-game item more valuable than 880 currency units.</p>
<h1 id="Make-the-game-bad-then-allow-users-to-pay-to-make-it-good"><a href="#Make-the-game-bad-then-allow-users-to-pay-to-make-it-good" class="headerlink" title="Make the game bad, then allow users to pay to make it good"></a>Make the game bad, then allow users to pay to make it good</h1><p>“Bad” can mean many things; “good” often means convenience. Pay to lure more pokemon, pay to save progress at any time, pay to get a slightly better weapon. The game can still be played without payments, but it seems to users that they can simply pay to wipe the pain away.</p>
<blockquote>
<p>They have the incentives to insert pain points into the game.</p>
</blockquote>
<h1 id="Set-different-prices-for-different-players-and-features"><a href="#Set-different-prices-for-different-players-and-features" class="headerlink" title="Set different prices for different players and features"></a>Set different prices for different players and features</h1><p>Make tiers of bundles of coins to please the “whales”, who will spend far more on your game than the others.<br>Set different prices on different players, gather the purchase data, and see which prices work.</p>
<blockquote>
<p>If it seems like you’re about to quit, hey here’s a discount. Or if you’re the type of person who will spend a lot of money, maybe they bump up the prices a bit.</p>
</blockquote>

    
	</div>
	<footer class="entry-footer">
		<div class="entry-meta-footer">
			<span class="category">
				
			</span>
			<span class="tags">
				
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../../tags/Business/">Business</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../../tags/Psychology/">Psychology</a></li></ul>

			</span>
		</div>
	</footer>
	
</article>


	<hr class="article-devider">



  
    <article id="post-Firearms-cheatsheet" class="post">
	<footer class="entry-meta-header">
		<span class="meta-elements date">
			<a href="/2016/Firearms-cheatsheet/" class="article-date">
  <time datetime="2016-08-03T15:41:14.000Z" itemprop="datePublished">2016-08-03</time>
</a>
		</span>
		<span class="meta-elements author">Brian</span>
		<div class="commentscount">
			
		</div>
	</footer>
	
	<header class="entry-header">
		
  
    <h1 itemprop="name" class="entry-title">
      <a class="article-title" href="/2016/Firearms-cheatsheet/">Firearms Cheatsheet</a>
    </h1>
  

	</header>
	<div class="entry-content">
		
    	<p>The entire handbook is <a href="http://www.gov.pe.ca/photos/original/CFSCmanualVer2.pdf" target="_blank" rel="external">here</a>, but you don’t want to read the whole thing, obviously.</p>
<h1 id="The-Four-ACTS"><a href="#The-Four-ACTS" class="headerlink" title="The Four ACTS"></a>The Four ACTS</h1><ul>
<li><strong>ASSUME</strong> every firearm is loaded</li>
<li><strong>CONTROL</strong> the muzzle direction at all times (Also: P)</li>
<li><strong>TRIGGER</strong> finger must be out of the trigger guard</li>
<li><strong>SEE</strong> that it is unloaded (Also: PROVE)</li>
</ul>
<h1 id="PROVE"><a href="#PROVE" class="headerlink" title="PROVE"></a>PROVE</h1><p>Every time you touch a firearm, PROVE it safe (according to the handbook).</p>
<ul>
<li><strong>POINT</strong> the muzzle at the safest direction</li>
<li><strong>REMOVE</strong> any ammunition</li>
<li><strong>OBSERVE</strong> the chamber for ammunition</li>
<li><strong>VERIFY</strong> the feeding path for ammunition</li>
<li><strong>EXAMINE</strong> the bore for ammunition, and also blockages</li>
</ul>
<h1 id="Types-of-Action"><a href="#Types-of-Action" class="headerlink" title="Types of Action"></a>Types of <em>Action</em></h1><p>An action is the thing that allows the ammunition to go in and out.</p>
<ul>
<li>Pump</li>
<li>Hinge (typically shotguns)</li>
<li>Bolt</li>
<li>Lever</li>
<li>Semi-automatic (single/double action)</li>
<li>Revolvers (single/double action)</li>
</ul>
<h1 id="Types-of-ammunition"><a href="#Types-of-ammunition" class="headerlink" title="Types of ammunition"></a>Types of ammunition</h1><h2 id="“Cartridges”-for-rifles-and-pistols"><a href="#“Cartridges”-for-rifles-and-pistols" class="headerlink" title="“Cartridges” (for rifles and pistols)"></a>“Cartridges” (for rifles and pistols)</h2><ul>
<li>Comes in <a href="http://www.pewpewtactical.com/rimfire-vs-centerfire-ammunition/" target="_blank" rel="external">rimfire or centerfire</a>.</li>
<li>Typical components include the case, primer, gunpowder, and the bullet (the thing that shoots out).</li>
<li>Typical bullet types include round nose, hollow point, full metal jacket, pointed bullet, partition bullet, and boat tail.</li>
</ul>
<h2 id="“Shells”-for-shotguns"><a href="#“Shells”-for-shotguns" class="headerlink" title="“Shells” (for shotguns)"></a>“Shells” (for shotguns)</h2><ul>
<li>The sizes are called “gauges”.</li>
<li>Typical components include the hull (case), primer, gunpowder, shots (the lead balls), slug (a giant lead ball eqv.), and the wad (the thing between powder and shots/slug).</li>
<li>A shell contains either shots or a single slug, not both.</li>
</ul>
<h1 id="Malfunctions"><a href="#Malfunctions" class="headerlink" title="Malfunctions"></a>Malfunctions</h1><ul>
<li>Always check what the firearm accepts before putting the ammunition in. </li>
<li>Jams: Do not fire another shot. Bring it to a gunsmith.</li>
<li>Hangfire: The primer is lighting the gunpowder too slowly. Wait for 60 seconds, then PROVE it safe (note the P). </li>
<li>Squib loads: The ammunition has primer, but no gunpowder. Wait for 60 seconds, then PROVE it safe (note the P). </li>
<li>Misfire: The ammunition does not have any explosive material in it. Wait for 60 seconds, then PROVE it safe (note the P). </li>
</ul>

    
	</div>
	<footer class="entry-footer">
		<div class="entry-meta-footer">
			<span class="category">
				
			</span>
			<span class="tags">
				
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../../tags/Firearms/">Firearms</a></li></ul>

			</span>
		</div>
	</footer>
	
</article>


	<hr class="article-devider">



  
    <article id="post-How-to-set-up-redis-on-AWS" class="post">
	<footer class="entry-meta-header">
		<span class="meta-elements date">
			<a href="/2016/How-to-set-up-redis-on-AWS/" class="article-date">
  <time datetime="2016-07-25T14:55:31.000Z" itemprop="datePublished">2016-07-25</time>
</a>
		</span>
		<span class="meta-elements author">Brian</span>
		<div class="commentscount">
			
		</div>
	</footer>
	
	<header class="entry-header">
		
  
    <h1 itemprop="name" class="entry-title">
      <a class="article-title" href="/2016/How-to-set-up-redis-on-AWS/">How to Set Up Redis on AWS</a>
    </h1>
  

	</header>
	<div class="entry-content">
		
    	<p>Easy!</p>
<h2 id="1-Launch-Instance-on-EC2"><a href="#1-Launch-Instance-on-EC2" class="headerlink" title="1. Launch Instance on EC2."></a>1. Launch Instance on EC2.</h2><p>The AMI I used was <code>Ubuntu Server 14.04 LTS (HVM), SSD Volume Type - ami-d732f0b7</code>; the whole world is probably using it.</p>
<p>Any instance type will do. For my proof of concept, I chose the smallest possible type (t2.nano). For $5 a month, it really isn’t as bad as you might think.</p>
<h2 id="2-Create-a-security-group-that-allows-inbound-connections-through-port-6379"><a href="#2-Create-a-security-group-that-allows-inbound-connections-through-port-6379" class="headerlink" title="2. Create a security group that allows inbound connections through port 6379."></a>2. Create a security group that allows inbound connections through port 6379.</h2><p>You might want to limit the source IPs, though. It is <a href="http://antirez.com/news/96" target="_blank" rel="external">apparently very easy to hack a redis server</a>.</p>
<h2 id="3-SSH-into-your-instance-set-up-something-and-install-the-right-things"><a href="#3-SSH-into-your-instance-set-up-something-and-install-the-right-things" class="headerlink" title="3. SSH into your instance, set up something, and install the right things."></a>3. SSH into your instance, set up something, and install the right things.</h2><ul>
<li>Add yourself to <code>authorized_keys</code>, then immediately log back in without the private key.</li>
<li><code>sudo apt-get update</code></li>
<li><code>sudo apt-get upgrade</code></li>
<li><code>sudo apt-get install build-essential tcl8.5 htop git-core  # (latter optional)</code></li>
<li><code>wget http://download.redis.io/releases/redis-stable.tar.gz</code></li>
<li><code>tar xzf redis-stable.tar.gz</code></li>
<li><code>cd redis-stable</code></li>
<li><code>make &amp;&amp; make test  # It says it&#39;s a good idea to run make test after make, but if the tests fail, whucha gunna do</code></li>
<li><code>sudo make install</code></li>
<li><code>cd utils</code></li>
<li><code>sudo ./install_server.sh</code></li>
</ul>
<p>After you do all that, the output should have been</p>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">Welcome to the redis service installer</div><div class="line">This script will help you easily <span class="keyword">set</span> up <span class="comment">a running redis server</span></div><div class="line"></div><div class="line">Please <span class="comment">select the redis port for this instance: [6379]</span> </div><div class="line">Selecting <span class="comment">default: 6379</span></div><div class="line">Please <span class="comment">select the redis config file name [</span>/etc/<span class="comment">redis</span>/<span class="number">6379.</span>conf] </div><div class="line">Selected default - /<span class="comment">etc</span>/redis/<span class="comment">6379.conf</span></div><div class="line">Please <span class="comment">select the redis log file name [</span>/var/<span class="comment">log</span>/redis_6379.<span class="built-in">log</span>] </div><div class="line">Selected default - /<span class="comment">var</span>/<span class="built-in">log</span>/<span class="comment">redis_6379.log</span></div><div class="line">Please <span class="comment">select the data directory for this instance [</span>/var/<span class="comment">lib</span>/redis/<span class="comment">6379]</span> </div><div class="line">Selected <span class="comment">default -</span> /var/<span class="comment">lib</span>/redis/<span class="comment">6379</span></div><div class="line">Please <span class="comment">select the redis executable path [</span>/usr/<span class="comment">local</span>/bin/<span class="comment">redis-server]</span> </div><div class="line">Selected <span class="comment">config:</span></div><div class="line">Port           <span class="comment">: 6379</span></div><div class="line">Config <span class="comment">file    :</span> /etc/<span class="comment">redis</span>/<span class="number">6379.</span>conf</div><div class="line"><span class="built-in">Log</span> <span class="keyword">file</span>       : /<span class="comment">var</span>/<span class="built-in">log</span>/<span class="comment">redis_6379.log</span></div><div class="line">Data <span class="comment">dir       :</span> /var/<span class="comment">lib</span>/redis/<span class="comment">6379</span></div><div class="line">Executable     <span class="comment">:</span> /usr/<span class="comment">local</span>/bin/<span class="comment">redis-server</span></div><div class="line">Cli <span class="comment">Executable :</span> /usr/<span class="comment">local</span>/bin/<span class="comment">redis-cli</span></div><div class="line">Is <span class="comment">this ok? Then press ENTER to go on or Ctrl-C to abort.</span></div><div class="line">Copied /tmp/<span class="comment">6379.conf =&gt;</span> /etc/<span class="comment">init.d</span>/redis_6379</div><div class="line">Installing service...</div><div class="line">perl: warning: Setting locale failed.</div><div class="line">perl: warning: Please check that your locale settings:</div><div class="line">        LANGUAGE = (unset),</div><div class="line">        LC_ALL = (unset),</div><div class="line">        LC_CTYPE = <span class="comment">"en_CA.UTF-8"</span>,</div><div class="line">        LANG = <span class="comment">"en_US.UTF-8"</span></div><div class="line">    are supported <span class="keyword">and</span> installed on your <span class="keyword">system</span>.</div><div class="line">perl: warning: Falling back to the standard locale (<span class="comment">"C"</span>).</div><div class="line"> Adding <span class="keyword">system</span> startup <span class="keyword">for</span> /<span class="comment">etc</span>/init.d/<span class="comment">redis_6379 ...</span></div><div class="line">   /etc/rc0.d/K20redis_6379 -&gt; ../init.d/redis_6379</div><div class="line">   /etc/rc1.d/K20redis_6379 <span class="comment">-&gt; ..</span>/init.d/<span class="comment">redis_6379</span></div><div class="line">   /etc/rc6.d/K20redis_6379 -&gt; ../init.d/redis_6379</div><div class="line">   /etc/rc2.d/S20redis_6379 <span class="comment">-&gt; ..</span>/init.d/<span class="comment">redis_6379</span></div><div class="line">   /etc/rc3.d/S20redis_6379 -&gt; ../init.d/redis_6379</div><div class="line">   /etc/rc4.d/S20redis_6379 <span class="comment">-&gt; ..</span>/init.d/<span class="comment">redis_6379</span></div><div class="line">   /etc/rc5.d/S20redis_6379 -&gt; ../init.d/redis_6379</div><div class="line">Success!</div><div class="line">Starting Redis server...</div><div class="line">Installation successful!</div></pre></td></tr></table></figure>
<h1 id="4-Test-it-out"><a href="#4-Test-it-out" class="headerlink" title="4. Test it out."></a>4. Test it out.</h1><ul>
<li><code>sudo service redis_6379 stop</code></li>
<li><code>sudo service redis_6379 start</code></li>
</ul>
<h1 id="5-Lock-it-downOpen-it-up"><a href="#5-Lock-it-downOpen-it-up" class="headerlink" title="5. Lock it downOpen it up."></a>5. <del>Lock it down</del>Open it up.</h1><p>In <code>sudo nano /etc/redis/6379.conf</code>, you have to make sure this line is commented out. It even has a thing on top of it, in all caps, explaining why.</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># ~~~ WARNING ~~~ If the computer running Redis is directly exposed to the</span></div><div class="line"><span class="comment"># internet, binding to all the interfaces is dangerous and will expose the</span></div><div class="line"><span class="comment"># instance to everybody on the internet. So by default we uncomment the</span></div><div class="line"><span class="comment"># following bind directive, that will force Redis to listen only into</span></div><div class="line"><span class="comment"># the IPv4 lookback interface address (this means Redis will be able to</span></div><div class="line"><span class="comment"># accept connections only from clients running into the same computer it</span></div><div class="line"><span class="comment"># is running).</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># IF YOU ARE SURE YOU WANT YOUR INSTANCE TO LISTEN TO ALL THE INTERFACES</span></div><div class="line"><span class="comment"># JUST COMMENT THE FOLLOWING LINE.</span></div><div class="line"><span class="comment"># ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></div><div class="line"><span class="attribute">bind</span> <span class="number">127.0.0.1</span></div></pre></td></tr></table></figure>
<p>Since this guide involves setting up a dedicated redis server, you really have to leave it out:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># <span class="selector-tag">bind</span> 127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span></div></pre></td></tr></table></figure>
<p>Lastly, open the firewall.</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sudo ufw allow <span class="number">6379</span></div><div class="line">sudo ufw allow <span class="number">16379</span></div><div class="line">sudo ufw allow <span class="number">26379</span></div></pre></td></tr></table></figure>
<h1 id="6-Set-a-password"><a href="#6-Set-a-password" class="headerlink" title="6. Set a password."></a>6. Set a password.</h1><p>If protected mode is on, the redis server must have a password to connect to it. Set it up using the <code>redis-cli</code>.</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$ </span>echo <span class="string">"poop"</span> | sha256sum</div><div class="line"><span class="number">5</span>fb4ba1a651bae8057ec6b5cdafc93fa7e0b7d944d6f02a4b751de4e15464def</div><div class="line"><span class="variable">$ </span>sudo nano /etc/redis/<span class="number">6379</span>.conf</div><div class="line"></div><div class="line"><span class="comment"># Uncomment the "requirepass" line</span></div><div class="line">requirepass <span class="number">5</span>fb4ba1a651bae8057ec6b5cdafc93fa7e0b7d944d6f02a4b751de4e15464def</div><div class="line"></div><div class="line"><span class="variable">$ </span>sudo service redis_6379 restart</div></pre></td></tr></table></figure>
<h1 id="7-Optional-use-it-with-django-redis"><a href="#7-Optional-use-it-with-django-redis" class="headerlink" title="7. Optional: use it with django-redis"></a>7. Optional: use it with django-redis</h1><p>If you happen to be using <code>django-redis</code>, then the cache can be specified as such</p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">CACHES = &#123;</div><div class="line">    <span class="string">'default'</span>: &#123;</div><div class="line">        <span class="string">'BACKEND'</span>: <span class="string">'django_redis.cache.RedisCache'</span>,</div><div class="line">        <span class="string">'LOCATION'</span>:</div><div class="line">            <span class="string">'redis://:7506360782a29944e1a84cbe6ab57d974322705252efcaeac64496f8db146d72@6379-redis-cache.com/0'</span>,</div><div class="line">        <span class="string">'OPTIONS'</span>: &#123;</div><div class="line">            <span class="string">'CLIENT_CLASS'</span>: <span class="string">'django_redis.client.DefaultClient'</span>,</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>It crashes if you didn’t set up everything correctly, which is nice.</p>
<h1 id="Yeah-but-why-would-you-ever-want-to-have-a-dedicated-Redis-server"><a href="#Yeah-but-why-would-you-ever-want-to-have-a-dedicated-Redis-server" class="headerlink" title="Yeah, but why would you ever want to have a dedicated Redis server?"></a>Yeah, but why would you ever want to have a dedicated Redis server?</h1><p>Maybe you want a dedicated server like that, to let other EC2 instances share the same cache. Maybe it is beneficial for cost reasons. Do remember, however: <a href="http://stackoverflow.com/questions/28113406/consideration-before-creating-a-single-redis-instance" target="_blank" rel="external">do not share Redis instances for different projects</a>. </p>

    
	</div>
	<footer class="entry-footer">
		<div class="entry-meta-footer">
			<span class="category">
				
			</span>
			<span class="tags">
				
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../../tags/AWS/">AWS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../../tags/Linux/">Linux</a></li></ul>

			</span>
		</div>
	</footer>
	
</article>


	<hr class="article-devider">



  
    <article id="post-Flattening-Promise-Chains-by-Example" class="post">
	<footer class="entry-meta-header">
		<span class="meta-elements date">
			<a href="/2016/Flattening-Promise-Chains-by-Example/" class="article-date">
  <time datetime="2016-07-08T19:35:18.000Z" itemprop="datePublished">2016-07-08</time>
</a>
		</span>
		<span class="meta-elements author">Brian</span>
		<div class="commentscount">
			
		</div>
	</footer>
	
	<header class="entry-header">
		
  
    <h1 itemprop="name" class="entry-title">
      <a class="article-title" href="/2016/Flattening-Promise-Chains-by-Example/">Flattening Promise Chains by Example</a>
    </h1>
  

	</header>
	<div class="entry-content">
		
    	<p>For all intents and purposes, these examples use <a href="https://github.com/petkaantonov/bluebird" target="_blank" rel="external"><code>bluebird</code></a>, a library that passes the <a href="https://promisesaplus.com/" target="_blank" rel="external">Promises/A+ spec</a>.</p>
<h2 id="Setup"><a href="#Setup" class="headerlink" title="Setup"></a>Setup</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> <span class="built_in">Promise</span> = <span class="built_in">require</span>(<span class="string">"bluebird"</span>),</div><div class="line">    assertDoesNotHappen = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Should not happen'</span>);    </div><div class="line">    &#125;;</div></pre></td></tr></table></figure>
<h2 id="Resolving-a-promise-calls-the-fulfil-function"><a href="#Resolving-a-promise-calls-the-fulfil-function" class="headerlink" title="Resolving a promise calls the fulfil function"></a>Resolving a promise calls the fulfil function</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line">    resolve();</div><div class="line">&#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">success</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'called'</span>);</div><div class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</div><div class="line">    <span class="comment">// not called</span></div><div class="line">    assertDoesNotHappen();</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="Rejecting-a-promise-calls-the-reject-function"><a href="#Rejecting-a-promise-calls-the-reject-function" class="headerlink" title="Rejecting a promise calls the reject function"></a>Rejecting a promise calls the reject function</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line">    reject();</div><div class="line">&#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">success</span>) </span>&#123;</div><div class="line">    <span class="comment">// not called</span></div><div class="line">    assertDoesNotHappen();</div><div class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</div><div class="line">    <span class="comment">// called</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'called'</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="Chained-resolves-all-resolve-given-undefined-as-next-resolution"><a href="#Chained-resolves-all-resolve-given-undefined-as-next-resolution" class="headerlink" title="Chained resolves all resolve given undefined as next resolution"></a>Chained resolves all resolve given undefined as next resolution</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line">    resolve();</div><div class="line">&#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">success</span>) </span>&#123;</div><div class="line">    <span class="comment">// called</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'called'</span>);</div><div class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</div><div class="line">    <span class="comment">// not called</span></div><div class="line">    assertDoesNotHappen();</div><div class="line">&#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">success</span>) </span>&#123;</div><div class="line">    <span class="comment">// called</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'called'</span>);</div><div class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</div><div class="line">    <span class="comment">// not called</span></div><div class="line">    assertDoesNotHappen();</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="If-any-fulfil-function-returns-a-value-the-next-then-is-resolved-with-it"><a href="#If-any-fulfil-function-returns-a-value-the-next-then-is-resolved-with-it" class="headerlink" title="If any fulfil function returns a value, the next then is resolved with it"></a>If any fulfil function returns a value, the next <code>then</code> is resolved with it</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line">    resolve(<span class="number">5</span>);</div><div class="line">&#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">success</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'1 gave '</span> + success);  <span class="comment">// 1 gave 5</span></div><div class="line">    <span class="keyword">return</span> <span class="number">6</span>;</div><div class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</div><div class="line">    <span class="comment">// not called</span></div><div class="line">    assertDoesNotHappen();</div><div class="line">&#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">success</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'2 gave '</span> + success);  <span class="comment">// 2 gave 6</span></div><div class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</div><div class="line">    <span class="comment">// not called</span></div><div class="line">    assertDoesNotHappen();</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="If-any-fulfil-function-throws-an-error-the-subsequent-then-is-rejected"><a href="#If-any-fulfil-function-throws-an-error-the-subsequent-then-is-rejected" class="headerlink" title="If any fulfil function throws an error, the subsequent then is rejected"></a>If any fulfil function throws an error, the subsequent <code>then</code> is rejected</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line">    resolve(<span class="number">5</span>);</div><div class="line">&#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">success</span>) </span>&#123;</div><div class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="number">6</span>);</div><div class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</div><div class="line">    <span class="comment">// not called</span></div><div class="line">    assertDoesNotHappen();</div><div class="line">&#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">success</span>) </span>&#123;</div><div class="line">    <span class="comment">// not called</span></div><div class="line">    assertDoesNotHappen();</div><div class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'error was'</span>, error);  <span class="comment">// error was (Error with a message 6)</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="But-all-thens-after-that-are-resolved-because-the-reject-function-didn’t-fail"><a href="#But-all-thens-after-that-are-resolved-because-the-reject-function-didn’t-fail" class="headerlink" title="But all thens after that are resolved because the reject function didn’t fail"></a>But all <code>thens</code> after <em>that</em> are resolved because the reject function didn’t fail</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line">    resolve(<span class="number">5</span>);</div><div class="line">&#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">success</span>) </span>&#123;</div><div class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="number">6</span>);</div><div class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</div><div class="line">    <span class="comment">// not called</span></div><div class="line">    assertDoesNotHappen();</div><div class="line">&#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">success</span>) </span>&#123;</div><div class="line">    <span class="comment">// not called</span></div><div class="line">    assertDoesNotHappen();</div><div class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'error was'</span>, error);  <span class="comment">// error was (Error with a message 6)</span></div><div class="line">&#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">success</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'success was'</span>, success);  <span class="comment">// success was undefined</span></div><div class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</div><div class="line">    <span class="comment">// not called</span></div><div class="line">    assertDoesNotHappen();</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>How is this reasonable?</p>
<h2 id="If-any-rejection-happens-along-the-chain-only-one-then-after-it-gets-rejected"><a href="#If-any-rejection-happens-along-the-chain-only-one-then-after-it-gets-rejected" class="headerlink" title="If any rejection happens along the chain, only one then after it gets rejected"></a>If any rejection happens along the chain, only one <code>then</code> after it gets rejected</h2><figure class="highlight scilab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">new Promise(<span class="function"><span class="keyword">function</span> <span class="params">(resolve, reject)</span> &#123;</span></div><div class="line">    resolve(<span class="number">5</span>);</div><div class="line">&#125;).<span class="keyword">then</span>(<span class="function"><span class="keyword">function</span> <span class="params">(success)</span> &#123;</span></div><div class="line">    <span class="keyword">return</span> new Promise(<span class="function"><span class="keyword">function</span> <span class="params">(resolve, reject)</span> &#123;</span></div><div class="line">        reject(<span class="number">6</span>);</div><div class="line">    &#125;);</div><div class="line">&#125;, <span class="function"><span class="keyword">function</span> <span class="params">(error)</span> &#123;</span></div><div class="line">    <span class="comment">// not called</span></div><div class="line">    assertDoesNotHappen();</div><div class="line">&#125;).<span class="keyword">then</span>(<span class="function"><span class="keyword">function</span> <span class="params">(success)</span> &#123;</span></div><div class="line">    <span class="comment">// not called</span></div><div class="line">    assertDoesNotHappen();</div><div class="line">&#125;, <span class="function"><span class="keyword">function</span> <span class="params">(error)</span> &#123;</span></div><div class="line">    console.<span class="built_in">log</span>(<span class="string">'error was'</span>, <span class="built_in">error</span>);  <span class="comment">// error was 6</span></div><div class="line">    <span class="keyword">return</span> <span class="number">7</span>;</div><div class="line">&#125;).<span class="keyword">then</span>(<span class="function"><span class="keyword">function</span> <span class="params">(success)</span> &#123;</span></div><div class="line">    console.<span class="built_in">log</span>(<span class="string">'success was'</span>, success);  <span class="comment">// success was 7</span></div><div class="line">&#125;, <span class="function"><span class="keyword">function</span> <span class="params">(error)</span> &#123;</span></div><div class="line">    <span class="comment">// not called</span></div><div class="line">    assertDoesNotHappen();</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="built_in">error</span> was <span class="number">6</span></div><div class="line">success was <span class="number">7</span></div></pre></td></tr></table></figure>

    
	</div>
	<footer class="entry-footer">
		<div class="entry-meta-footer">
			<span class="category">
				
			</span>
			<span class="tags">
				
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../../tags/JavaScript/">JavaScript</a></li></ul>

			</span>
		</div>
	</footer>
	
</article>


	<hr class="article-devider">



  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="../7/">&laquo; Prev</a><a class="page-number" href="../../">1</a><span class="space">&hellip;</span><a class="page-number" href="../6/">6</a><a class="page-number" href="../7/">7</a><span class="page-number current">8</span><a class="page-number" href="../9/">9</a><a class="page-number" href="../10/">10</a><span class="space">&hellip;</span><a class="page-number" href="../17/">17</a><a class="extend next" rel="next" href="../9/">Next &raquo;</a>
    </nav>
  


    </div>
    <div class="mb-search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:blog.ohai.ca">
  </form>
</div>
<footer id="footer">
	<h1 class="footer-blog-title">
		<a href="/">Brian&#39;s Blog</a>
	</h1>
	<span class="copyright">
		&copy; 2017 Brian<br>
		Modify from <a href="http://sanographix.github.io/tumblr/apollo/" target="_blank">Apollo</a> theme, designed by <a href="http://www.sanographix.net/" target="_blank">SANOGRAPHIX.NET</a><br>
		Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
	</span>
</footer>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>



<script src="../../../js/script.js"></script>
  </div>

  <script type="text/javascript">
    //<![CDATA[
    var sc_project=4446854;
    var sc_invisible=0;
    var sc_security="74785e80";
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write(
      "<sc"+"ript type='text/javascript' src='" +
      scJsHost +
      "statcounter.com/counter/counter_xhtml.js'></" +
      "script>"
    );
    //]]>
  </script>
  <noscript>
    <img style="display: none"
         src="http://c.statcounter.com/4446854/0/74785e80/0/" />
  </noscript><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
</body>
</html>

<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>Archives: 2020 | Brian&#39;s Blog</title>
  <meta name="viewport" content="width=device-width">
  <meta name="description" content="Meow">
<meta property="og:type" content="website">
<meta property="og:title" content="Brian's Blog">
<meta property="og:url" content="https://blog.ohai.ca/archives/2020/index.html">
<meta property="og:site_name" content="Brian's Blog">
<meta property="og:description" content="Meow">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Brian's Blog">
<meta name="twitter:description" content="Meow">
  
    <link rel="alternative" href="/atom.xml" title="Brian&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="../../css/style.css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]--><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  
</head>
<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <div class="mobile-nav-panel">
	<i class="icon-reorder icon-large"></i>
</div>
<header id="header">
	<h1 class="blog-title">
		<a href="/">Brian&#39;s Blog</a>
	</h1>
	<nav class="nav">
		<ul>
			<li><a href="/">Home</a></li><li><a href="/archives">Archives</a></li>
			<li><a id="nav-search-btn" class="nav-icon" title="Search"></a></li>
			<li><a href="/atom.xml" id="nav-rss-link" class="nav-icon" title="RSS Feed"></a></li>
		</ul>
	</nav>
	<div id="search-form-wrap">
		<form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://blog.ohai.ca"></form>
	</div>
</header>
    <div id="main">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="../../tags/AWS/">AWS</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Access/">Access</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Accessibility/">Accessibility</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Android/">Android</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Apple/">Apple</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Business/">Business</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Career/">Career</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Cars/">Cars</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Firearms/">Firearms</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/General/">General</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Health/">Health</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Investing/">Investing</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Java/">Java</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/JavaScript/">JavaScript</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Kotlin/">Kotlin</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Learning/">Learning</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Lifestyle/">Lifestyle</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Linguistics/">Linguistics</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Linux/">Linux</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Machine-Learning/">Machine Learning</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Mathematics/">Mathematics</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Meta/">Meta</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Pokemon/">Pokemon</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Psychology/">Psychology</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/PyCon/">PyCon</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Python/">Python</a><span class="tag-list-count">22</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/QA/">QA</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Recipes/">Recipes</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/SQL/">SQL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Science/">Science</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Security/">Security</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Software-Development/">Software Development</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Startups/">Startups</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Travel/">Travel</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../../tags/Tumblr/">Tumblr</a><span class="tag-list-count">4</span></li></ul>

  
    <article id="post-Corporate-dynamics" class="post">
	<footer class="entry-meta-header">
		<span class="meta-elements date">
			<a href="/2020/Corporate-dynamics/" class="article-date">
  <time datetime="2020-12-25T15:31:23.000Z" itemprop="datePublished">2020-12-25</time>
</a>
		</span>
		<span class="meta-elements author">Brian</span>
		<div class="commentscount">
			
		</div>
	</footer>
	
	<header class="entry-header">
		
  
    <h1 itemprop="name" class="entry-title">
      <a class="article-title" href="/2020/Corporate-dynamics/">Corporate dynamics</a>
    </h1>
  

	</header>
	<div class="entry-content">
		
    	<p>Someone who works at a big company shared his experience working there.</p>
<p>Your boss is not going to fire you because:</p>
<ul>
<li>Your boss doesn’t pay you. That money comes from the heavens. It is not in his interest to save money.</li>
<li>Firing someone often negatively impacts team morale.</li>
<li>Once your position is gone, it could be gone forever. As a team leader from the higher-ups’ point of view, the bigger the team is, the more successful your boss is, as long as you (not them) get the job done.</li>
<li>If a series of layoffs is announced, you can act as buffer for the rest of the team, and be laid off <em>then</em>.</li>
<li>A company often issues shares to a team proportional to its size. If you are around doing nothing, a team of ten can be granted 1000 shares, but each person may get 111 shares while you get 0.</li>
<li>Ultimately, it is not your boss’s priority to make their team efficient. All it needs to do is to deliver a lot, to <em>make themself look good</em> so they get a promotion for managing a great team. Your boss will do nothing to you unless you get in <em>their</em> personal way.</li>
</ul>
<p>You should be as lazy as your team’s average member.</p>
<ul>
<li>Go out for lunch with your team. Take as long as you feel like. Take coffee breaks as well. Make sure you poop on company time. If you <em>don’t</em> do as they do, then you are telling the boss that everybody else is slacking off, and that is not a good look for the team or the boss.</li>
</ul>
<p>Everyone will try to keep secrets from you because:</p>
<ul>
<li>Everything you don’t know is something they <em>do</em> know. And if that something matters to the company (e.g. a critical process or know-how), then knowing that information makes you un-fire-able.</li>
</ul>
<p>The lack of a method of (rightful) dismissal reduces the company’s ability to keep its employees on their toes. While there are always hardworking individuals who are self-motivated, being un-fire-able certainly encourages complacency of the lazy. Big companies systematically attract the less motivated, and that’s what we should be mindful of when finding a new place to work. Whether you personally find this desirable is down to personal preference.</p>

    
	</div>
	<footer class="entry-footer">
		<div class="entry-meta-footer">
			<span class="category">
				
			</span>
			<span class="tags">
				
			</span>
		</div>
	</footer>
	
</article>


	<hr class="article-devider">




  
    <article id="post-Reasons-to-root-in-2020" class="post">
	<footer class="entry-meta-header">
		<span class="meta-elements date">
			<a href="/2020/Reasons-to-root-in-2020/" class="article-date">
  <time datetime="2020-11-23T17:01:42.000Z" itemprop="datePublished">2020-11-23</time>
</a>
		</span>
		<span class="meta-elements author">Brian</span>
		<div class="commentscount">
			
		</div>
	</footer>
	
	<header class="entry-header">
		
  
    <h1 itemprop="name" class="entry-title">
      <a class="article-title" href="/2020/Reasons-to-root-in-2020/">Reasons to root in 2020</a>
    </h1>
  

	</header>
	<div class="entry-content">
		
    	<p>It is 2020. Most people have stopped bootloader unlocking and rooting their phones. Here are some of the things they say:</p>
<blockquote>
<p>This is the first time I don’t root a phone since 2010 with android, and to be honest I don’t see the benefits of rooting anymore especially that (the skin) is great out the box.</p>
</blockquote>
<blockquote>
<p>I used ADB to be able to debloat entirely what I want. So don’t need to root for me.</p>
</blockquote>
<p>All in all, there really aren’t a lot of reasons left. But there are till <em>some</em>:</p>
<h2 id="Custom-ROMs"><a href="#Custom-ROMs" class="headerlink" title="Custom ROMs"></a>Custom ROMs</h2><p>If you cannot unlock your bootloader, your device will stop updating the moment the manufacturer decides you should get a new one. That should never be how it works. Imagine your toaster telling you to get a new one, even though it still works perfectly fine. Or imagine your computer telling you it can’t run some operating system. It doesn’t say that; it lets you run whatever you want as long as you have the compatible parts. Or imagine your home thermostat telling you it cannot work anymore.</p>
<h2 id="Ad-blocking"><a href="#Ad-blocking" class="headerlink" title="Ad blocking"></a>Ad blocking</h2><p>With root, you can edit your own /etc/hosts file or download <a href="https://adaway.org/" target="_blank" rel="external">an app to do it for you</a>. No more ads in any app. If you are particularly adventurous and have an older device, you can even <a href="https://repo.xposed.info/module/tw.fatminmin.xposed.minminguard" target="_blank" rel="external">hide the ad spaces entirely</a> so you don’t even know ads exist.</p>
<p>Without root, you can use <a href="https://blokada.org/" target="_blank" rel="external">some kind of VPN implementation</a> I guess, but the VPN icon in the status bar will forever remind you that you are using some sort of workaround.</p>
<h2 id="Firewall"><a href="#Firewall" class="headerlink" title="Firewall"></a>Firewall</h2><p>With root, you can <a href="https://f-droid.org/en/packages/dev.ukanth.ufirewall/" target="_blank" rel="external">allow or deny any app internet access</a>.</p>
<p>Without root, you rely—yet again—on <a href="https://github.com/M66B/NetGuard" target="_blank" rel="external">an app</a> establishing a VPN connection. It is still possible, but what if you don’t want to see ads either? <a href="https://adguard.com/en/adguard-dns/overview.html" target="_blank" rel="external">Private DNS</a>? That’s an awkward workaround that potentially exposes everything you do to a third party. </p>
<h2 id="Call-recording"><a href="#Call-recording" class="headerlink" title="Call recording"></a>Call recording</h2><p>What if you are <em>allowed</em> to record your own calls, but your operating system does not allow it? That’s just missing out on an important security feature.</p>
<h2 id="Backup-Restore"><a href="#Backup-Restore" class="headerlink" title="Backup / Restore"></a>Backup / Restore</h2><p>Root can be used to access any app’s data directory. This allows you to backup the data and restore it at will.</p>
<p>Without root? If you must perform a hard reset, you data is done for. Some people may say “well I have backups to Google Drive enabled so I am fine.” Have you tried restoring from Google Drive? Half of it is broken.</p>
<h2 id="System-management"><a href="#System-management" class="headerlink" title="System management"></a>System management</h2><p>Did you know that you can <a href="https://android.stackexchange.com/questions/200032/difference-between-system-files-charging-enabled-vs-battery-charging-enabled" target="_blank" rel="external">turn charging on and off with root</a>? You can write your own power management software to preserve your battery’s lifespan.</p>
<p>If you don’t have root, you are either stuck with whatever your manufacturer decided to implement, or literally nothing at all. And when your battery doesn’t last as long as it used to, you will have no choice but to fork out your own money for a replacement, knowing full well that, in fact, you could have done better. </p>
<h2 id="Control-Replace-Google-Play-Services"><a href="#Control-Replace-Google-Play-Services" class="headerlink" title="Control / Replace Google Play Services"></a>Control / Replace Google Play Services</h2><p>Complete system access allows you to remove Google Play Services entirely. If you don’t like or trust Google, this is the way to go. You can also replace Google Play Services with <a href="https://microg.org/" target="_blank" rel="external">microG</a>, so Google doesn’t phone (heh) home every ten seconds.</p>
<p>Without root? I am sorry. You should have known better.</p>
<h2 id="Remove-app-permissions"><a href="#Remove-app-permissions" class="headerlink" title="Remove app permissions"></a>Remove app permissions</h2><p>Using root, you may revoke any app’s permissions (even if it breaks the app), disable the app, and even removing it permanently from storage. You can only do the second one without root. </p>
<h2 id="Replace-fonts-look-and-feel"><a href="#Replace-fonts-look-and-feel" class="headerlink" title="Replace fonts / look and feel"></a>Replace fonts / look and feel</h2><p>On one hand, you can ask, “why on earth would you want to replace the system UI font?”</p>
<p>On the other hand, why not? What if you hate the font your phone comes with? What if you don’t want to put up with an eyesore everyday?</p>
<h2 id="Turn-the-phone-into-a-USB-drive"><a href="#Turn-the-phone-into-a-USB-drive" class="headerlink" title="Turn the phone into a USB drive"></a>Turn the phone into a USB drive</h2><p>Apps like DriveDroid, which turns your phone into a bootable USB drive, only work with root. Without that, your device will never appear bootable to a computer.</p>

    
	</div>
	<footer class="entry-footer">
		<div class="entry-meta-footer">
			<span class="category">
				
			</span>
			<span class="tags">
				
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../tags/Android/">Android</a></li></ul>

			</span>
		</div>
	</footer>
	
</article>


	<hr class="article-devider">




  
    <article id="post-Timing-the-market" class="post">
	<footer class="entry-meta-header">
		<span class="meta-elements date">
			<a href="/2020/Timing-the-market/" class="article-date">
  <time datetime="2020-11-20T18:25:42.000Z" itemprop="datePublished">2020-11-20</time>
</a>
		</span>
		<span class="meta-elements author">Brian</span>
		<div class="commentscount">
			
		</div>
	</footer>
	
	<header class="entry-header">
		
  
    <h1 itemprop="name" class="entry-title">
      <a class="article-title" href="/2020/Timing-the-market/">Timing the market</a>
    </h1>
  

	</header>
	<div class="entry-content">
		
    	<p><img src="https://i.imgur.com/3bQAT8X.png" alt="4"></p>
<p>It is easy to convince someone out of timing the market. Take these four examples.</p>
<h2 id="The-trend-is-going-down"><a href="#The-trend-is-going-down" class="headerlink" title="The trend is going down"></a>The trend is going down</h2><p>Who knows when it will hit the true bottom. <a href="https://www.investopedia.com/terms/f/fallingknife.asp" target="_blank" rel="external">Don’t catch a falling knife</a>, you know! Let’s wait and see.</p>
<h2 id="The-down-trend-reverses-and-it-starts-going-up"><a href="#The-down-trend-reverses-and-it-starts-going-up" class="headerlink" title="The down trend reverses and it starts going up"></a>The down trend reverses and it starts going up</h2><p>It could be a <a href="https://www.investopedia.com/terms/d/deadcatbounce.asp" target="_blank" rel="external">dead cat bounce</a>. Let’s wait until it’s actually going up.</p>
<h2 id="The-trend-is-actually-going-up-now"><a href="#The-trend-is-actually-going-up-now" class="headerlink" title="The trend is actually going up now"></a>The trend is actually going up now</h2><p>It’s going up too quickly. Besides, the P/E ratio must be so high that we should not buy this stock right now. Remember: buy low, sell high. Better not buy now to avoid losing money.</p>
<h2 id="The-up-trend-reverses-and-starts-going-down"><a href="#The-up-trend-reverses-and-starts-going-down" class="headerlink" title="The up trend reverses and starts going down"></a>The up trend reverses and starts going down</h2><p><em>I told you</em> it’s going to come back down. Let’s wait until the price is done dropping. </p>
<hr>
<p>And then the stock continues the downtrend. All the while, any stocks you could have bought during the cycle might have gone up by <a href="https://www.investopedia.com/ask/answers/042415/what-average-annual-return-sp-500.asp" target="_blank" rel="external">7% annually</a>. If you want to lose out, just keep waiting…</p>
<p>Image source: <a href="https://csjackywealth.com/2018/08/you-could-be-unknowingly-timing-market.html" target="_blank" rel="external">4</a>, but it’s such a common image, and they too ripped it off the original, so I am not going to cite it again.</p>

    
	</div>
	<footer class="entry-footer">
		<div class="entry-meta-footer">
			<span class="category">
				
			</span>
			<span class="tags">
				
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../tags/Investing/">Investing</a></li></ul>

			</span>
		</div>
	</footer>
	
</article>


	<hr class="article-devider">




  
    <article id="post-How-to-set-up-nginx" class="post">
	<footer class="entry-meta-header">
		<span class="meta-elements date">
			<a href="/2020/How-to-set-up-nginx/" class="article-date">
  <time datetime="2020-10-01T00:19:59.000Z" itemprop="datePublished">2020-09-30</time>
</a>
		</span>
		<span class="meta-elements author">Brian</span>
		<div class="commentscount">
			
		</div>
	</footer>
	
	<header class="entry-header">
		
  
    <h1 itemprop="name" class="entry-title">
      <a class="article-title" href="/2020/How-to-set-up-nginx/">How to set up nginx</a>
    </h1>
  

	</header>
	<div class="entry-content">
		
    	<p>For some reason, I have <em>never</em> had the need to set up nginx and run some kind of python project with it. Well, here you go. This is how you might do it.</p>
<p>Guides used:</p>
<ul>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-ubuntu-18-04" target="_blank" rel="external">How To Install Nginx on Ubuntu 18.04</a> - Digital Ocean</li>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-django-with-postgres-nginx-and-gunicorn-on-ubuntu-18-04" target="_blank" rel="external">How To Set Up Django with Postgres, Nginx, and Gunicorn on Ubuntu 18.04</a> - Digital Ocean</li>
<li><a href="http://michal.karzynski.pl/blog/2013/06/09/django-nginx-gunicorn-virtualenv-supervisor/" target="_blank" rel="external">Setting up Django with Nginx, Gunicorn, virtualenv, supervisor and PostgreSQL</a> - Michał</li>
</ul>
<h1 id="Install-nginx"><a href="#Install-nginx" class="headerlink" title="Install nginx"></a>Install nginx</h1><pre><code>sudo apt-get update
sudo apt-get install nginx

systemctl status nginx  # Check that it is running
firefox http://localhost  # Should be running here as well
</code></pre><h1 id="Configure-firewall"><a href="#Configure-firewall" class="headerlink" title="Configure firewall"></a>Configure firewall</h1><pre><code>sudo ufw allow &apos;Nginx HTTP&apos;  # or &apos;Nginx HTTPS&apos;, or &apos;Nginx Full&apos;
</code></pre><h1 id="Install-gunicorn-and-gevent"><a href="#Install-gunicorn-and-gevent" class="headerlink" title="Install gunicorn and gevent"></a>Install gunicorn and gevent</h1><p>Did you know that <a href="https://gunicorn.org/" target="_blank" rel="external">gunicorn</a> is a python package? You do now!</p>
<pre><code>(venv) pip install gunicorn gevent
</code></pre><p><a href="http://www.gevent.org/" target="_blank" rel="external">gevent</a> handles your web server’s thread pool and serves your website with async workers. You will be using it later.</p>
<p>You can also use <a href="https://stackshare.io/stackups/gunicorn-vs-uwsgi" target="_blank" rel="external">uWSGI</a>, which is <a href="https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/uwsgi/" target="_blank" rel="external">very similar</a> and supposedly <a href="https://djangodeployment.com/2017/01/02/which-wsgi-server-should-i-use/" target="_blank" rel="external">has more features than you will ever need</a> (bad).</p>
<h1 id="Configure-Django-to-use-gunicorn"><a href="#Configure-Django-to-use-gunicorn" class="headerlink" title="Configure Django to use gunicorn"></a>Configure Django to use gunicorn</h1><p>Ensure the <code>WSGI_APPLICATION</code> key in your <code>settings.py</code> exists, and points to a valid variable:</p>
<pre><code># settings.py

WSGI_APPLICATION = &apos;myproject.wsgi.application&apos;

# wsgi.py
...    
# This application object is used by any WSGI server configured to use this
# file. This includes Django&apos;s development server, if the WSGI_APPLICATION
# setting points here.
application = get_wsgi_application()
</code></pre><h1 id="Install-supervisor-supervisord"><a href="#Install-supervisor-supervisord" class="headerlink" title="Install supervisor/supervisord"></a>Install <a href="http://supervisord.org/" target="_blank" rel="external">supervisor/supervisord</a></h1><pre><code>sudo apt-get install supervisor
# or (probably not any better)
sudo pip install supervisor
</code></pre><p>Look inside <code>/etc/supervisor/supervisord.conf</code>. There you can see where you can put your supervisor configs.</p>
<pre><code>[include]
files =
        /etc/supervisor/conf.d/*.conf
        /home/jerry/supervisor/**/*.conf
</code></pre><p>Create a <code>web-server.conf</code> file anywhere supervisor can read it. Use this content as a start</p>
<pre><code>[program:web-server]
command=/home/jerry/.virtualenvs/myproject/bin/gunicorn
    --pythonpath /home/jerry/path/to/myproject
    --config /home/jerry/path/to/myproject/local-gunicorn.py
    web.wsgi:application
user = jerry
stdout_logfile = /tmp/myproject.log
redirect_stderr = true
environment=
    HOME=/home/jerry/
</code></pre><p>Ensure your project has a <code>local-gunicorn.py</code> (it can be called anything) that has <a href="https://github.com/benoitc/gunicorn/blob/master/examples/example_config.py" target="_blank" rel="external">this content</a>:</p>
<pre><code>import multiprocessing

# This readies gunicorn for nginx to use.
bind = &apos;unix:/tmp/web-gunicorn.sock&apos;
backlog = 2048

workers = multiprocessing.cpu_count() * 2 + 1
worker_class = &apos;gevent&apos;  # &apos;sync&apos; is the default if you don&apos;t want to use gevent
worker_connections = 1024
timeout = 60
keepalive = 2
max_requests = 0
spew = False
daemon = False
pidfile = &apos;/tmp/myproject.pid&apos;
umask = 0
user = None
group = None
tmp_upload_dir = None

errorlog = &apos;-&apos;
loglevel = &apos;info&apos;
accesslog = &apos;-&apos;  # Can also be None
access_log_format = \
    &apos;%(h)s %(l)s %(u)s %(t)s &quot;%(r)s&quot; %(s)s %(b)s %(L)s &quot;%(f)s&quot; &quot;%(a)s&quot;&apos;

proc_name = &apos;myproject&apos;
</code></pre><p>This is a minimal config. Look at <a href="https://github.com/benoitc/gunicorn/blob/master/examples/example_config.py" target="_blank" rel="external">the sample file</a> to see what else you can add.</p>
<p>Reload supervisor.</p>
<pre><code>sudo supervisorctl reread
sudo supervisorctl update
</code></pre><p>This should run your web server. Use <code>sudo supervisorctl</code> to check.</p>
<pre><code>$ sudo supervisorctl
web-server                                        RUNNING   pid 16386, uptime 0:00:11
$ curl --unix-socket /tmp/web-gunicorn.sock localhost
&lt;html&gt;...&lt;/html&gt;
</code></pre><h1 id="Configure-nginx-to-expose-your-web-server"><a href="#Configure-nginx-to-expose-your-web-server" class="headerlink" title="Configure nginx to expose your web server"></a>Configure nginx to expose your web server</h1><p>It doesn’t do any good to have your server running in a socket. You need to expose it with nginx.</p>
<p>Create a new file <code>/etc/nginx/sites-available/myproject</code>.</p>
<pre><code>upstream app_server {
    server unix:/tmp/web-gunicorn.sock fail_timeout=0;
}

server {
    listen 80;
    server_name ohai.ca foo.ohai.ca 1.2.3.4;

    location / {
        try_files $uri @proxy_to_app;
    }

    location @proxy_to_app {
        proxy_pass http://app_server;
        proxy_set_header Host $http_host;
        proxy_redirect off;
    }
}
</code></pre><p>This file basically tells every request to go to the gunicorn server.</p>
<p>Symlink the file to <code>sites-enabled</code>:</p>
<pre><code># Be very precise. Use the full path!
$ sudo ln -sv /etc/nginx/sites-available/web-server /etc/nginx/sites-enabled/web-server
</code></pre><p>Finally, delete the <code>default</code> site if there is one.</p>
<pre><code>$ sudo rm /etc/nginx/sites-enabled/default
$ sudo service nginx restart
</code></pre><p>Restart nginx. Your website should be up and running at <code>localhost</code>, <code>ohai.ca foo.ohai.ca 1.2.3.4</code>, or whatever else you have configured.<br>Your Django setup might say “Site matching query does not exist”, but this is a <em>very</em> easy fix.</p>
<h2 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h2><p>If you want your “production” server (i.e. running on port 80) to have <code>DEBUG</code> set to off, you can either <a href="https://stackoverflow.com/a/88331/1558430" target="_blank" rel="external">use a package that does it</a>, or make a <code>myproject/settings/__init__.py</code> that tricks Django into loading a specific settings file.</p>
<pre><code>myproject/
    settings/
        __init__.py  # if some_condition (e.g. hostname): from production import *
        production.py
        development.py
</code></pre><h2 id="Reloading-your-web-site-code-without-downtime"><a href="#Reloading-your-web-site-code-without-downtime" class="headerlink" title="Reloading your web site code without downtime"></a>Reloading your web site code without downtime</h2><p>Follow <a href="http://docs.gunicorn.org/en/stable/faq.html#how-do-i-reload-my-application-in-gunicorn" target="_blank" rel="external">the official advice</a> and send a SIGHUP to your gunicorn process:</p>
<pre><code>kill -HUP masterpid
</code></pre>
    
	</div>
	<footer class="entry-footer">
		<div class="entry-meta-footer">
			<span class="category">
				
			</span>
			<span class="tags">
				
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../tags/Learning/">Learning</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../tags/Software-Development/">Software Development</a></li></ul>

			</span>
		</div>
	</footer>
	
</article>


	<hr class="article-devider">




  
    <article id="post-The-true-cost-of-a-reboot" class="post">
	<footer class="entry-meta-header">
		<span class="meta-elements date">
			<a href="/2020/The-true-cost-of-a-reboot/" class="article-date">
  <time datetime="2020-08-04T19:44:54.000Z" itemprop="datePublished">2020-08-04</time>
</a>
		</span>
		<span class="meta-elements author">Brian</span>
		<div class="commentscount">
			
		</div>
	</footer>
	
	<header class="entry-header">
		
  
    <h1 itemprop="name" class="entry-title">
      <a class="article-title" href="/2020/The-true-cost-of-a-reboot/">The true cost of a reboot</a>
    </h1>
  

	</header>
	<div class="entry-content">
		
    	<p>Your phone is wonky, you want to fix it, and you reboot it. How much did that just cost you?</p>
<p>In Ontario, electricity rates are tiered from \$0.101 per kWh, to \$0.208 per kWh. But for the sake of calculations, let’s assume you always charge your phone during peak hours.</p>
<p>Your phone drops from 60% to 57% battery after a reboot. 3% of 3000mAh (if that’s what your battery does and holds) is 90mAh. At 5V, this corresponds to energy use of… 0.45Wh (or 162k ish joules).</p>
<p>0.00045kWh would cost you… \$0.0000936, I guess? That is 90 microdollars for a reboot.</p>

    
	</div>
	<footer class="entry-footer">
		<div class="entry-meta-footer">
			<span class="category">
				
			</span>
			<span class="tags">
				
			</span>
		</div>
	</footer>
	
</article>


	<hr class="article-devider">




  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="page/2/">2</a><a class="page-number" href="page/3/">3</a><a class="extend next" rel="next" href="page/2/">Next &raquo;</a>
    </nav>
  


    </div>
    <div class="mb-search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:blog.ohai.ca">
  </form>
</div>
<footer id="footer">
	<h1 class="footer-blog-title">
		<a href="/">Brian&#39;s Blog</a>
	</h1>
	<span class="copyright">
		&copy; 2021 Brian<br>
		Modify from <a href="http://sanographix.github.io/tumblr/apollo/" target="_blank">Apollo</a> theme, designed by <a href="http://www.sanographix.net/" target="_blank">SANOGRAPHIX.NET</a><br>
		Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
	</span>
</footer>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>



<script src="../../js/script.js"></script>
  </div>

  <script type="text/javascript">
    //<![CDATA[
    var sc_project=4446854;
    var sc_invisible=0;
    var sc_security="74785e80";
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write(
      "<sc"+"ript type='text/javascript' src='" +
      scJsHost +
      "statcounter.com/counter/counter_xhtml.js'></" +
      "script>"
    );
    //]]>
  </script>
  <noscript>
    <img style="display: none"
         src="http://c.statcounter.com/4446854/0/74785e80/0/" />
  </noscript><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
</body>
</html>

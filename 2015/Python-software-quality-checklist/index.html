<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>Python Software Quality Checklist | root&#39;s Blog</title>
  <meta name="viewport" content="width=device-width">
  <meta name="description" content="You either commit yourself as a professional racing driver that’s designed to win races or you come second or you come third or fifth and am not design to come third, fourth or fifth. I race to win.">
<meta property="og:type" content="article">
<meta property="og:title" content="Python Software Quality Checklist">
<meta property="og:url" content="http://blog.ohai.ca/2015/Python-software-quality-checklist/index.html">
<meta property="og:site_name" content="root's Blog">
<meta property="og:description" content="You either commit yourself as a professional racing driver that’s designed to win races or you come second or you come third or fifth and am not design to come third, fourth or fifth. I race to win.">
<meta property="og:updated_time" content="2017-10-05T15:59:22.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Python Software Quality Checklist">
<meta name="twitter:description" content="You either commit yourself as a professional racing driver that’s designed to win races or you come second or you come third or fifth and am not design to come third, fourth or fifth. I race to win.">
  
    <link rel="alternative" href="/atom.xml" title="root&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="../../css/style.css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]--><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  
</head>
<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <div class="mobile-nav-panel">
	<i class="icon-reorder icon-large"></i>
</div>
<header id="header">
	<h1 class="blog-title">
		<a href="/">root&#39;s Blog</a>
	</h1>
	<nav class="nav">
		<ul>
			<li><a href="/">Home</a></li><li><a href="/archives">Archives</a></li>
			<li><a id="nav-search-btn" class="nav-icon" title="Search"></a></li>
			<li><a href="/atom.xml" id="nav-rss-link" class="nav-icon" title="RSS Feed"></a></li>
		</ul>
	</nav>
	<div id="search-form-wrap">
		<form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://blog.ohai.ca"></form>
	</div>
</header>
    <div id="main">
      <article id="post-Python-software-quality-checklist" class="post">
	<footer class="entry-meta-header">
		<span class="meta-elements date">
			<a href="/2015/Python-software-quality-checklist/" class="article-date">
  <time datetime="2015-02-19T14:26:55.000Z" itemprop="datePublished">2015-02-19</time>
</a>
		</span>
		<span class="meta-elements author">root</span>
		<div class="commentscount">
			
		</div>
	</footer>
	
	<header class="entry-header">
		
  
    <h1 class="article-title entry-title" itemprop="name">
      Python Software Quality Checklist
    </h1>
  

	</header>
	<div class="entry-content">
		
    	<blockquote>
<p>You either commit yourself as a professional racing driver that’s designed to win races or you come second or you come third or fifth and am not design to come third, fourth or fifth. I race to win. And if you no longer go for a gap that exists, you are no longer a racing driver because we are competing, we are competing to win. ― Ayrton Senna</p>
</blockquote>
<p><a href="http://en.wikipedia.org/wiki/Software_quality" target="_blank" rel="external">Shit code is not code. Shit code is shit.</a></p>
<h1 id="Databases"><a href="#Databases" class="headerlink" title="Databases"></a>Databases</h1><ul>
<li>Are all database calls resistant to <a href="http://stackoverflow.com/questions/2235318/how-do-i-deal-with-this-race-condition-in-django" target="_blank" rel="external">race conditions</a>?</li>
<li>For transactional queries, are they definitely not idempotent<br>(e.g. you don’t want to subtract value and still read the same balance again)?</li>
</ul>
<h1 id="Docstrings-and-Comments"><a href="#Docstrings-and-Comments" class="headerlink" title="Docstrings and Comments"></a>Docstrings and Comments</h1><ul>
<li>Are all files documented?</li>
<li>Are all function and method parameters documented?</li>
<li>Are all lines under 72 characters long?</li>
</ul>
<h1 id="Exceptions"><a href="#Exceptions" class="headerlink" title="Exceptions"></a>Exceptions</h1><ul>
<li>Does the code <a href="https://www.python.org/dev/peps/pep-0020/" target="_blank" rel="external">fail early</a>?<ul>
<li>And is there anything catching <em>all</em> of these exceptions?</li>
</ul>
</li>
<li>Are all custom exceptions based on <a href="https://docs.python.org/2/library/exceptions.html#exceptions.Exception" target="_blank" rel="external"><code>Exception</code></a>?</li>
<li>Do these exceptions <a href="http://stackoverflow.com/questions/13256777/possible-to-raise-exception-that-includes-non-english-characters-in-python-2" target="_blank" rel="external">handle unicode characters</a>?<ul>
<li>Messages are empty if the string fails to encode.</li>
</ul>
</li>
</ul>
<h1 id="Files"><a href="#Files" class="headerlink" title="Files"></a>Files</h1><ul>
<li>Are all lines under 79 characters long?</li>
<li>Are any files too long? (pylint checks this.)</li>
<li>Are any files organised inappropriately?</li>
<li>If it is an executable file, is there a shebang (<code>#!/usr/bin/env python...</code>)?<ul>
<li>Should it be executable?</li>
<li>Does the shebang point to <a href="http://www.cyberciti.biz/tips/finding-bash-perl-python-portably-using-env.html" target="_blank" rel="external">something relative</a>?</li>
<li>Does the file have executable permissions?</li>
</ul>
</li>
<li><a href="https://www.python.org/dev/peps/pep-0263/" target="_blank" rel="external">Does it declare an encoding</a>?</li>
<li>Does it have a docstring? See <a href="#Docstrings and comments">Docstrings and comments</a></li>
</ul>
<h1 id="Forward-Compatibility"><a href="#Forward-Compatibility" class="headerlink" title="Forward Compatibility"></a>Forward Compatibility</h1><ul>
<li>Is there anything that prevents migration to <a href="http://nbviewer.ipython.org/github/rasbt/python_reference/blob/master/tutorials/key_differences_between_python_2_and_3.ipynb" target="_blank" rel="external">python3</a>?\</li>
<li>Are classes for supporting compatibility named with the 3K notation?<ul>
<li>Python 2.7: <code>python_2700</code></li>
<li><a href="https://github.com/jcrocholl/pep8/blob/master/pep8.py#L1121" target="_blank" rel="external">Python 3.0: <code>python_3000</code></a></li>
<li>Python 3.4: <code>python_3400</code></li>
</ul>
</li>
</ul>
<h1 id="Functions-and-Methods"><a href="#Functions-and-Methods" class="headerlink" title="Functions and Methods"></a>Functions and Methods</h1><ul>
<li>Is the code reinventing the wheel? Are there existing functions that do the same thing?</li>
<li>Does the function use keyword and star-args unnecessarily?</li>
<li>Can it be a pure function? See <a href="#Tests">Tests</a></li>
<li>If it returns just a boolean, does the function have a name that appropriately reflects that?</li>
<li>Do number parameters have min/max/allowed_values check(s) in place?</li>
<li>Are there any magic strings, numbers, and/or values?</li>
<li>Are all function arguments given with keywords where appropriate?</li>
<li>Do your functions survive <a href="http://jamie-wong.com/2013/07/12/grep-test/" target="_blank" rel="external">the <code>grep</code> test</a>?<br>If you cannot grep a function by name and get all its usages, it fails the grep test.</li>
</ul>
<h2 id="Function-lengths"><a href="#Function-lengths" class="headerlink" title="Function lengths"></a>Function lengths</h2><blockquote>
<p>“The first rule of functions is that they should be small. The second rule of funct`ions is that they should be smaller than that. Functions should not be 100 lines long. Functions should hardly ever be 20 lines long.” - <a href="http://www.javacodegeeks.com/2012/12/rule-of-30-when-is-a-method-class-or-subsystem-too-big.html" target="_blank" rel="external">Bob Martin, Clean Code</a></p>
</blockquote>
<blockquote>
<p>“Every function was just 2, or 3, or 4 lines long, each was transparently obvious, each told a story, and each led you to the next in a compelling order.” - <a href="http://programmers.stackexchange.com/questions/133404/what-is-the-ideal-length-of-a-method" target="_blank" rel="external">Kent Beck</a></p>
</blockquote>
<p>NetBeans <a href="http://stackoverflow.com/questions/18147171/netbeans-7-4-introduces-10-lines-max-per-method-rule-where-does-this-rule-com" target="_blank" rel="external">heavy recommends</a> a 10-line function length to keep them testable.<br>Others say 10 lines is too short and should be under <a href="http://davetayls.me/blog/2013/07/01/how-will-i-keep-javascript-code-quality-hight-jshint/" target="_blank" rel="external">8</a>, 20, 60, or <a href="http://programmers.stackexchange.com/questions/133404/what-is-the-ideal-length-of-a-method" target="_blank" rel="external">53</a>.<br>The takeaway is: keep it under 7 to be compliant with all of these recommendations.</p>
<h1 id="Imports"><a href="#Imports" class="headerlink" title="Imports"></a>Imports</h1><ul>
<li><a href="https://pypi.python.org/pypi/isort" target="_blank" rel="external">Are all imports ordered</a>?</li>
<li>Besides <code>__future__</code>, are there <a href="http://stackoverflow.com/questions/9916878/importing-modules-in-python-best-practice#comment42694692_15780908" target="_blank" rel="external"><code>from x import y</code></a> line(s) <code>x.y</code> could have been used instead?</li>
<li>Do <code>__init__.py</code> files declare a <a href="http://stackoverflow.com/questions/44834/can-someone-explain-all-in-python" target="_blank" rel="external"><code>__all__</code></a>?</li>
</ul>
<h1 id="Iterables"><a href="#Iterables" class="headerlink" title="Iterables"></a>Iterables</h1><ul>
<li>Are there any instances where iterables are unnecessarily lists instead of generators?</li>
<li>Are there any usages of the <a href="https://docs.python.org/2/library/sets.html" target="_blank" rel="external">deprecated</a> <code>sets</code> library instead of <code>set/frozenset</code>?</li>
<li>Are there any instances where <code>frozenset</code> could have been used in place of <code>set</code>?</li>
<li>Are all iterables iterated using <code>enumerate()</code>, <code>iteritems()</code>, or <code>itervalues()</code>?</li>
<li>Are there instances of <code>not x in y</code> instead of the better <code>x not in y</code>? (pylint checks this.)</li>
</ul>
<h1 id="Logging"><a href="#Logging" class="headerlink" title="Logging"></a>Logging</h1><ul>
<li>Are all logging calls important?</li>
<li>Is the string formatted by logging? <code>logging.info(u&#39;%s&#39;, &#39;foo&#39;)</code></li>
</ul>
<h1 id="Migrations"><a href="#Migrations" class="headerlink" title="Migrations"></a>Migrations</h1><ul>
<li>Are migration files missing?</li>
</ul>
<h1 id="Numbers"><a href="#Numbers" class="headerlink" title="Numbers"></a>Numbers</h1><ul>
<li>Is there a <code>from __future__ import division</code> import?<ul>
<li>If not, are there instances of division where one of the numbers can be an integer?</li>
</ul>
</li>
<li>Does code that perform <code>float(some_string)</code> <a href="http://stackoverflow.com/a/1369357" target="_blank" rel="external">also catch <code>UnicodeEncodeError</code></a>?</li>
</ul>
<h1 id="Regex"><a href="#Regex" class="headerlink" title="Regex"></a>Regex</h1><ul>
<li>Is it necessary?</li>
<li>Does any of them contain unnecessary <em>and</em> unsafe <code>.</code>?</li>
</ul>
<h1 id="Speed"><a href="#Speed" class="headerlink" title="Speed"></a>Speed</h1><ul>
<li>Write <code>x &lt; y &lt; z</code> instead of <code>x &lt; y and y &lt; z</code>.</li>
<li>Are there any database queries occurring unnecessarily in loops?</li>
<li>Are there instances of <code>while True</code> where <a href="https://wiki.python.org/moin/PythonSpeed" target="_blank" rel="external"><code>while 1</code></a> can be used instead?</li>
<li>Are there any <a href="https://wiki.python.org/moin/PythonSpeed" target="_blank" rel="external">for loops that could have been faster list/dict/generator comprehensions</a>?</li>
<li>Is the code <a href="http://stackoverflow.com/questions/536300/what-is-the-shortest-perceivable-application-response-delay" target="_blank" rel="external">“perceivably fast”</a>?</li>
</ul>
<h1 id="Statements"><a href="#Statements" class="headerlink" title="Statements"></a>Statements</h1><ul>
<li>Do lines contain <a href="http://docs.python-guide.org/en/latest/writing/style/#pep-8" target="_blank" rel="external">more than one statement</a>?</li>
<li>The <strong>We Are All Consenting Adults Principle</strong>: are you or anyone in the team a child? Do you know for sure? Would you risk it?</li>
</ul>
<h1 id="Strings"><a href="#Strings" class="headerlink" title="Strings"></a>Strings</h1><ul>
<li>Adapting <a href="http://stackoverflow.com/a/56190" target="_blank" rel="external">this person’s practice</a>, does this double-quoted string contain variables?</li>
<li>If it is visible to the user, is it a <code>unicode</code> instance?</li>
<li>Besides <a href="#Logging">logging</a>, are all strings formatted using <a href="https://docs.python.org/2/library/string.html#format-string-syntax" target="_blank" rel="external"><code>.format()</code></a> instead of <code>%</code>?</li>
<li>Are all <code>format()</code> calls made using keyword arguments?</li>
</ul>
<h1 id="Templating"><a href="#Templating" class="headerlink" title="Templating"></a>Templating</h1><ul>
<li>Are there untranslated strings?</li>
<li>Are there hard-coded values?</li>
<li>Is the template coupled to what provides its variables?</li>
</ul>
<h1 id="Tests"><a href="#Tests" class="headerlink" title="Tests"></a>Tests</h1><ul>
<li>Is there at least one test case for every pure function?</li>
<li>Are most (if not all) code paths tested? This can be detected through coverage.</li>
<li><a href="https://pythonhosted.org/kitchen/unicode-frustrations.html#when-writing-unittests-include-non-ascii-values-and-both-unicode-and-str-type" target="_blank" rel="external">Is there a test involving unexpected input types</a>?</li>
<li>Did you test your changes locally, no matter `how small, before re/submitting a change?</li>
<li>Did you test locally, again, after a rebase?</li>
<li>Tests with conditional statements (e.g. <code>for</code>, <code>if</code>, <code>with</code>, <code>while</code>) <strong>MUST</strong> double-check if it is testing anything.</li>
</ul>
<h1 id="Variables"><a href="#Variables" class="headerlink" title="Variables"></a>Variables</h1><ul>
<li>Are there unused variables? (pylint checks this.)</li>
</ul>

    
	</div>
	<footer class="entry-footer">
		<div class="entry-meta-footer">
			<span class="category">
				
			</span>
			<span class="tags">
				
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../tags/Python/">Python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../tags/QA/">QA</a></li></ul>

			</span>
		</div>
	</footer>
	
    
<nav id="article-nav">
  
    <a href="/2015/Introduction-to-HTML5-and-accessiblity/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Introduction to HTML5 and Accessibility (2015)
        
      </div>
    </a>
  
  
    <a href="/2015/When-to-use-unicode-strings/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">
        
          When to Use Unicode Strings
        
      </div>
    </a>
  
</nav>

  
</article>




    </div>
    <div class="mb-search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:blog.ohai.ca">
  </form>
</div>
<footer id="footer">
	<h1 class="footer-blog-title">
		<a href="/">root&#39;s Blog</a>
	</h1>
	<span class="copyright">
		&copy; 2019 root<br>
		Modify from <a href="http://sanographix.github.io/tumblr/apollo/" target="_blank">Apollo</a> theme, designed by <a href="http://www.sanographix.net/" target="_blank">SANOGRAPHIX.NET</a><br>
		Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
	</span>
</footer>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>



<script src="../../js/script.js"></script>
  </div>

  <script type="text/javascript">
    //<![CDATA[
    var sc_project=4446854;
    var sc_invisible=0;
    var sc_security="74785e80";
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write(
      "<sc"+"ript type='text/javascript' src='" +
      scJsHost +
      "statcounter.com/counter/counter_xhtml.js'></" +
      "script>"
    );
    //]]>
  </script>
  <noscript>
    <img style="display: none"
         src="http://c.statcounter.com/4446854/0/74785e80/0/" />
  </noscript><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>

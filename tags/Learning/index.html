<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>Tag: Learning | Brian&#39;s Blog</title>
  <meta name="viewport" content="width=device-width">
  <meta name="description" content="Meow">
<meta property="og:type" content="website">
<meta property="og:title" content="Brian's Blog">
<meta property="og:url" content="https://blog.ohai.ca/tags/Learning/index.html">
<meta property="og:site_name" content="Brian's Blog">
<meta property="og:description" content="Meow">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Brian's Blog">
<meta name="twitter:description" content="Meow">
  
    <link rel="alternative" href="/atom.xml" title="Brian&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="../../css/style.css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]--><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  
</head>
<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <div class="mobile-nav-panel">
	<i class="icon-reorder icon-large"></i>
</div>
<header id="header">
	<h1 class="blog-title">
		<a href="/">Brian&#39;s Blog</a>
	</h1>
	<nav class="nav">
		<ul>
			<li><a href="/">Home</a></li><li><a href="/archives">Archives</a></li>
			<li><a id="nav-search-btn" class="nav-icon" title="Search"></a></li>
			<li><a href="/atom.xml" id="nav-rss-link" class="nav-icon" title="RSS Feed"></a></li>
		</ul>
	</nav>
	<div id="search-form-wrap">
		<form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://blog.ohai.ca"></form>
	</div>
</header>
    <div id="main">
      
  
    <article id="post-Thoughts-on-Jetpack-Compose" class="post">
	<footer class="entry-meta-header">
		<span class="meta-elements date">
			<a href="/2021/Thoughts-on-Jetpack-Compose/" class="article-date">
  <time datetime="2021-04-15T02:15:34.000Z" itemprop="datePublished">2021-04-14</time>
</a>
		</span>
		<span class="meta-elements author">Brian</span>
		<div class="commentscount">
			
		</div>
	</footer>
	
	<header class="entry-header">
		
  
    <h1 itemprop="name" class="entry-title">
      <a class="article-title" href="/2021/Thoughts-on-Jetpack-Compose/">Thoughts on Jetpack Compose</a>
    </h1>
  

	</header>
	<div class="entry-content">
		
    	<p>For whatever reason, I have been toying around with <a href="https://developer.android.com/jetpack/compose" target="_blank" rel="external">Jetpack Compose</a> for about a week now. Having started Android development (out of necessity) however many man-hours ago, I was using <a href="https://developer.android.com/reference/android/app/Activity" target="_blank" rel="external">Activities</a> to <a href="https://stackoverflow.com/a/24706378/1558430" target="_blank" rel="external">set up my views</a>, and <a href="https://developer.android.com/guide/topics/ui/declaring-layout" target="_blank" rel="external">layout files</a> to define my templates. This meant each activity I had must hook up template events one by one, like so:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">    setContentView(R.layout.main);  <span class="comment">// "Use this xml file for this view"</span></span><br><span class="line"></span><br><span class="line">    Button button = (Button) findViewById(R.id.my_button);</span><br><span class="line">    button.setOnClickListener(<span class="keyword">new</span> Button.OnClickListener() &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">            ...</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>I looked for a replacement for this style of development from the start. Firstly, that is in Java, and I have never liked Java. Secondly, this is a stupid amount of code for what amounts to <code>$(&#39;button&#39;).click(() =&gt; ...)</code> in something like jQuery. The fact that I need to inflate (show/bind, I guess?) my own layout file, or am given the opportunity to do it differently, means that there is too much flexibility for making a button do stuff. The fact that there is no good way to select a sub-element of a view. The fact that an onClickListener is so awkward to implement because it is implemented as a <em>typed</em> class instead of a simple closure, made the situation so much worse. Finally, the fact that I had to set up <em>all</em> the events inside an activity’s <code>onCreate</code> (I mean, it can call a separate method that sets up the functions, but the idea is the same) was so awkward, it made me doubt whether I was doing something properly.</p>
<h2 id="Enter-Kotlin"><a href="#Enter-Kotlin" class="headerlink" title="Enter Kotlin"></a>Enter Kotlin</h2><p>The first solution I found was called Kotlin, which wasn’t a direct solution to the boilerplate problem, but made the syntax a lot more terse (though not necessarily better):</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState)</span><br><span class="line">    setContentView(R.layout.main)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> button = findViewById(R.id.my_button)</span><br><span class="line">    button.setOnClickListener &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Switching to Kotlin resolves some of my peeves with Java.</p>
<ol>
<li>You don’t <code>new</code> a class because it is apparent that the keyword is useless when a class cannot be called like a function.</li>
<li>No more <code>button.setOnClickListener(new Button.OnClickListener()</code>, <code>Button button = new Button()</code>, or type information that fundamentally just adds noise.</li>
<li>The <code>onCLickListener</code> accepts what is visually a simple closure. It is just Kotlin’s magic, but you know. If it works, it works.</li>
</ol>
<h2 id="Enter-Kotlin-Synthetics"><a href="#Enter-Kotlin-Synthetics" class="headerlink" title="Enter Kotlin Synthetics"></a>Enter Kotlin Synthetics</h2><p>Since Jetbrains created both the Kotlin language and Android Studio, they have a lot of power in changing the way Android apps are created. To help solve the problem with “who the hell wants to use <code>findViewById</code>“, they created <a href="https://antonioleiva.com/kotlin-android-extensions/" target="_blank" rel="external">Kotlin Synthetics</a>, a way to automatically inject views into the activity by their IDs. For example, if your button was defined in the XML as <code>android:id=&quot;@+id/my_button&quot;</code>, you will get a variable called <code>my_button</code> or <code>myButton</code> (I forgot which). With Kotlin Synthetics, the code will become even simpler:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState)</span><br><span class="line">    setContentView(R.layout.main)</span><br><span class="line"></span><br><span class="line">    myButton.setOnClickListener &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Looking back, this really was a small improvement that added up as the number of buttons and textfields increased.</p>
<h2 id="Enter-Jetpack-view-binding"><a href="#Enter-Jetpack-view-binding" class="headerlink" title="Enter Jetpack view binding"></a>Enter Jetpack view binding</h2><p>Out of nowhere, Kotlin synthetics was forced to deprecate because <a href="https://developer.android.com/topic/libraries/view-binding/migration" target="_blank" rel="external">Google wanted to do the same thing</a> with a thing they called Jetpack, something they say will accelerate app development (or words to that effect). It was not a big transition to Jetpack view binding for the most part, other than a minor issue where nested views do not get bound the same way.</p>
<p>Roughly speaking, the example code ends up like so:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState)</span><br><span class="line">    binding = ActivityMainBinding.inflate(layoutInflater)</span><br><span class="line">    setContentView(binding.root)</span><br><span class="line"></span><br><span class="line">    binding.myButton.setOnClickListener &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>There are more lines, but the overall approach is less magical than Kotlin Synthetics, which was probably what Google was going for.</p>
<h2 id="Enter-Jetpack-Compose"><a href="#Enter-Jetpack-Compose" class="headerlink" title="Enter Jetpack Compose"></a>Enter Jetpack Compose</h2><p>The year was (any time after 2013, really) and component-based architectures like React was all the rage. Soon after that, Facebook released <a href="https://componentkit.org/" target="_blank" rel="external">ComponentKit</a>, a UI framework for Objective-C heavily influenced by React. Apple released something called <a href="https://developer.apple.com/xcode/swiftui/" target="_blank" rel="external">SwiftUI</a>, which is more or less the same thing for Swift, their own language. What would Google do (WWGD)? Their answer is apparently to introduce <a href="https://developer.android.com/jetpack/compose" target="_blank" rel="external">Jetpack Compose</a>, a way to build UI on top of their own programming language, for their own operating system, just like what Apple did.</p>
<p>The example code looks a bit like this:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState)</span><br><span class="line"></span><br><span class="line">    setContent &#123;</span><br><span class="line">        View()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">View</span><span class="params">()</span></span> &#123;</span><br><span class="line">    Button(</span><br><span class="line">        onClick = &#123; ... &#125;,</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Although the code appears to be longer than any of the examples above, <em>it removes the need for a separate layout XML file</em>, and <em>event and data binding happen inline</em>. These are major advantages of declarative UIs over imperative UIs, (with <a href="https://youtu.be/mVVNJKv9esE" target="_blank" rel="external">obvious drawbacks</a> as well, but the benefits far outweigh the costs).</p>
<h2 id="Enter-me-using-Jetpack-Compose"><a href="#Enter-me-using-Jetpack-Compose" class="headerlink" title="Enter me, using Jetpack Compose"></a>Enter me, using Jetpack Compose</h2><p>Jetpack Compose is a mad attempt from Google at reimplementing React for Android, which suffers from the same problems as react: like how you are sometimes forced to do non-standard things in React, such as using <code>className</code> instead of <code>class</code> because the word <code>class</code> is taken, you will learn the quirks of Jetpack compose as you start to use it.</p>
<h3 id="Modifier-order-matters"><a href="#Modifier-order-matters" class="headerlink" title="Modifier order matters?"></a>Modifier order matters?</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Column(</span><br><span class="line">    modifier = Modifier</span><br><span class="line">        .padding(<span class="number">10</span>.dp)</span><br><span class="line">        .width(<span class="number">100</span>.dp)</span><br><span class="line">) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>In CSS, <code>width: 100px; padding: 10px;</code> it would not matter which order you place <code>width</code> and <code>padding</code>, as long as the two attributes do not interact with each other. In Jetpack Compose, <a href="https://developer.android.com/jetpack/compose/layout#modifiers" target="_blank" rel="external">they do matter</a>. I can think of a thousand reasons why it would be better if the order does not matter, but let’s suppose this is a consequence of modifiers being actual method calls.</p>
<p>Google explained this behaviour as a feature:</p>
<blockquote>
<p>The explicit order helps you to reason about how different modifiers will interact. Compare this to the view-based system where you had to learn the box model, that margins applied “outside” the element but padding “inside” it, and a background element would be sized accordingly.</p>
</blockquote>
<p>This design is unintuitive to me. The two examples they gave demonstrates this:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Padding is clickable</span></span><br><span class="line">Modifier</span><br><span class="line">    .clickable(onClick = onClick)</span><br><span class="line">    .padding(padding)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Padding is not clickable</span></span><br><span class="line">Modifier</span><br><span class="line">    .padding(padding)</span><br><span class="line">    .clickable(onClick = onClick)</span><br></pre></td></tr></table></figure>
<p>The first example has a clickable padding because <code>clickable</code> was applied first. The second example does not have a clickable padding because the <code>padding</code> call was made before the <code>clickable</code> call. Does that make sense to you? I thought it would be the other way around. Leave a comment in the comment section down below. Remember to smash that like button and hit subscribe if you find this article useful. Or maybe it is subscribe first and like later. Who knows. Maybe order matters.</p>
<p><img src="/image/eat-noodles.gif" alt="Eat noodles"></p>
<h3 id="Modifiers-are-everything"><a href="#Modifiers-are-everything" class="headerlink" title="Modifiers are everything"></a>Modifiers are everything</h3><p>Modifiers could conceivably be understood as CSS <code>style=&quot;...&quot;</code> attributes, but not quite so. Unlike <code>style</code>, whose only task is to attach styles to an element, a <code>Modifier</code> are able to attach events as well.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Card(</span><br><span class="line">    modifer = Modifier</span><br><span class="line">        .fillMaxWidth()  <span class="comment">// Styling</span></span><br><span class="line">        .clickable(onClick = &#123; onClick() &#125;),  <span class="comment">// Events</span></span><br><span class="line">    ...</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>This leads us to the next problem:</p>
<h3 id="Every-composable-handles-modifiers-differently"><a href="#Every-composable-handles-modifiers-differently" class="headerlink" title="Every composable handles modifiers differently"></a>Every composable handles modifiers differently</h3><p>This bit reminds me of HTML 4.01, when sometimes it is <code>width=&quot;12&quot;</code>, and sometimes it is <code>style=&quot;width: 12px;&quot;</code>.</p>
<p>Depending on the <code>@Composable</code>, it can accept either</p>
<ul>
<li>No modifiers at all;</li>
<li>A modifier through the <code>modifier</code> parameter, which would allow you to add styling only;</li>
<li>A modifier through the <code>modifier</code> parameter, which would allow you to add events only;</li>
<li>A modifier through the <code>modifier</code> parameter, which would allow you to add both styling and events;</li>
<li>Individual parameters like <code>onClick = () -&gt; Unit</code> that would allow you to add an event to it; or</li>
<li>Combinations of the above, but not using the standard parameter names <code>onClick</code> or <code>modifier</code>.</li>
</ul>
<p>The issue is rampant even in the standard composables. For example, <code>Text</code> offers a <code>color</code> parameter, while a <code>Card</code> might use <code>contentColor</code> to the same effect. <code>Card</code> has a <code>backgroundColor</code> too. Does <code>Text</code> have that? No, it does not. How do you style a <code>Text</code>‘s background then, you ask? Well, you wrap a <code>Suface</code> around it, which accepts—wait for it—<code>color</code>, for its <em>background</em> colour.</p>
<p><img src="/image/website-under-construction.jpeg" alt="Retro"></p>
<p>The entire API screams, read the docs, and go fuck yourself on your way out.</p>
<h2 id="Enter-exit"><a href="#Enter-exit" class="headerlink" title="Enter exit"></a>Enter exit</h2><p>All in all, using Jetpack Compose was not a joy in itself, but very much so when compared to the alternatives presented above. The library is currently at version <code>1.0.0-beta04</code>, and Google developers have claimed to have frozen the API, so what we see now is what we will get for Compose V1. Let’s hope Compose V1 is at least usable right now, and Compose V2 fixes these issues without breaking in too many places.</p>

    
	</div>
	<footer class="entry-footer">
		<div class="entry-meta-footer">
			<span class="category">
				
			</span>
			<span class="tags">
				
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../Kotlin/">Kotlin</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="">Learning</a></li></ul>

			</span>
		</div>
	</footer>
	
</article>


	<hr class="article-devider">




  
    <article id="post-How-to-set-up-nginx" class="post">
	<footer class="entry-meta-header">
		<span class="meta-elements date">
			<a href="/2020/How-to-set-up-nginx/" class="article-date">
  <time datetime="2020-10-01T00:19:59.000Z" itemprop="datePublished">2020-09-30</time>
</a>
		</span>
		<span class="meta-elements author">Brian</span>
		<div class="commentscount">
			
		</div>
	</footer>
	
	<header class="entry-header">
		
  
    <h1 itemprop="name" class="entry-title">
      <a class="article-title" href="/2020/How-to-set-up-nginx/">How to set up nginx</a>
    </h1>
  

	</header>
	<div class="entry-content">
		
    	<p>For some reason, I have <em>never</em> had the need to set up nginx and run some kind of python project with it. Well, here you go. This is how you might do it.</p>
<p>Guides used:</p>
<ul>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-ubuntu-18-04" target="_blank" rel="external">How To Install Nginx on Ubuntu 18.04</a> - Digital Ocean</li>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-django-with-postgres-nginx-and-gunicorn-on-ubuntu-18-04" target="_blank" rel="external">How To Set Up Django with Postgres, Nginx, and Gunicorn on Ubuntu 18.04</a> - Digital Ocean</li>
<li><a href="http://michal.karzynski.pl/blog/2013/06/09/django-nginx-gunicorn-virtualenv-supervisor/" target="_blank" rel="external">Setting up Django with Nginx, Gunicorn, virtualenv, supervisor and PostgreSQL</a> - Michał</li>
</ul>
<h1 id="Install-nginx"><a href="#Install-nginx" class="headerlink" title="Install nginx"></a>Install nginx</h1><pre><code>sudo apt-get update
sudo apt-get install nginx

systemctl status nginx  # Check that it is running
firefox http://localhost  # Should be running here as well
</code></pre><h1 id="Configure-firewall"><a href="#Configure-firewall" class="headerlink" title="Configure firewall"></a>Configure firewall</h1><pre><code>sudo ufw allow &apos;Nginx HTTP&apos;  # or &apos;Nginx HTTPS&apos;, or &apos;Nginx Full&apos;
</code></pre><h1 id="Install-gunicorn-and-gevent"><a href="#Install-gunicorn-and-gevent" class="headerlink" title="Install gunicorn and gevent"></a>Install gunicorn and gevent</h1><p>Did you know that <a href="https://gunicorn.org/" target="_blank" rel="external">gunicorn</a> is a python package? You do now!</p>
<pre><code>(venv) pip install gunicorn gevent
</code></pre><p><a href="http://www.gevent.org/" target="_blank" rel="external">gevent</a> handles your web server’s thread pool and serves your website with async workers. You will be using it later.</p>
<p>You can also use <a href="https://stackshare.io/stackups/gunicorn-vs-uwsgi" target="_blank" rel="external">uWSGI</a>, which is <a href="https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/uwsgi/" target="_blank" rel="external">very similar</a> and supposedly <a href="https://djangodeployment.com/2017/01/02/which-wsgi-server-should-i-use/" target="_blank" rel="external">has more features than you will ever need</a> (bad).</p>
<h1 id="Configure-Django-to-use-gunicorn"><a href="#Configure-Django-to-use-gunicorn" class="headerlink" title="Configure Django to use gunicorn"></a>Configure Django to use gunicorn</h1><p>Ensure the <code>WSGI_APPLICATION</code> key in your <code>settings.py</code> exists, and points to a valid variable:</p>
<pre><code># settings.py

WSGI_APPLICATION = &apos;myproject.wsgi.application&apos;

# wsgi.py
...    
# This application object is used by any WSGI server configured to use this
# file. This includes Django&apos;s development server, if the WSGI_APPLICATION
# setting points here.
application = get_wsgi_application()
</code></pre><h1 id="Install-supervisor-supervisord"><a href="#Install-supervisor-supervisord" class="headerlink" title="Install supervisor/supervisord"></a>Install <a href="http://supervisord.org/" target="_blank" rel="external">supervisor/supervisord</a></h1><pre><code>sudo apt-get install supervisor
# or (probably not any better)
sudo pip install supervisor
</code></pre><p>Look inside <code>/etc/supervisor/supervisord.conf</code>. There you can see where you can put your supervisor configs.</p>
<pre><code>[include]
files =
        /etc/supervisor/conf.d/*.conf
        /home/jerry/supervisor/**/*.conf
</code></pre><p>Create a <code>web-server.conf</code> file anywhere supervisor can read it. Use this content as a start</p>
<pre><code>[program:web-server]
command=/home/jerry/.virtualenvs/myproject/bin/gunicorn
    --pythonpath /home/jerry/path/to/myproject
    --config /home/jerry/path/to/myproject/local-gunicorn.py
    web.wsgi:application
user = jerry
stdout_logfile = /tmp/myproject.log
redirect_stderr = true
environment=
    HOME=/home/jerry/
</code></pre><p>Ensure your project has a <code>local-gunicorn.py</code> (it can be called anything) that has <a href="https://github.com/benoitc/gunicorn/blob/master/examples/example_config.py" target="_blank" rel="external">this content</a>:</p>
<pre><code>import multiprocessing

# This readies gunicorn for nginx to use.
bind = &apos;unix:/tmp/web-gunicorn.sock&apos;
backlog = 2048

workers = multiprocessing.cpu_count() * 2 + 1
worker_class = &apos;gevent&apos;  # &apos;sync&apos; is the default if you don&apos;t want to use gevent
worker_connections = 1024
timeout = 60
keepalive = 2
max_requests = 0
spew = False
daemon = False
pidfile = &apos;/tmp/myproject.pid&apos;
umask = 0
user = None
group = None
tmp_upload_dir = None

errorlog = &apos;-&apos;
loglevel = &apos;info&apos;
accesslog = &apos;-&apos;  # Can also be None
access_log_format = \
    &apos;%(h)s %(l)s %(u)s %(t)s &quot;%(r)s&quot; %(s)s %(b)s %(L)s &quot;%(f)s&quot; &quot;%(a)s&quot;&apos;

proc_name = &apos;myproject&apos;
</code></pre><p>This is a minimal config. Look at <a href="https://github.com/benoitc/gunicorn/blob/master/examples/example_config.py" target="_blank" rel="external">the sample file</a> to see what else you can add.</p>
<p>Reload supervisor.</p>
<pre><code>sudo supervisorctl reread
sudo supervisorctl update
</code></pre><p>This should run your web server. Use <code>sudo supervisorctl</code> to check.</p>
<pre><code>$ sudo supervisorctl
web-server                                        RUNNING   pid 16386, uptime 0:00:11
$ curl --unix-socket /tmp/web-gunicorn.sock localhost
&lt;html&gt;...&lt;/html&gt;
</code></pre><h1 id="Configure-nginx-to-expose-your-web-server"><a href="#Configure-nginx-to-expose-your-web-server" class="headerlink" title="Configure nginx to expose your web server"></a>Configure nginx to expose your web server</h1><p>It doesn’t do any good to have your server running in a socket. You need to expose it with nginx.</p>
<p>Create a new file <code>/etc/nginx/sites-available/myproject</code>.</p>
<pre><code>upstream app_server {
    server unix:/tmp/web-gunicorn.sock fail_timeout=0;
}

server {
    listen 80;
    server_name ohai.ca foo.ohai.ca 1.2.3.4;

    location / {
        try_files $uri @proxy_to_app;
    }

    location @proxy_to_app {
        proxy_pass http://app_server;
        proxy_set_header Host $http_host;
        proxy_redirect off;
    }
}
</code></pre><p>This file basically tells every request to go to the gunicorn server.</p>
<p>Symlink the file to <code>sites-enabled</code>:</p>
<pre><code># Be very precise. Use the full path!
$ sudo ln -sv /etc/nginx/sites-available/web-server /etc/nginx/sites-enabled/web-server
</code></pre><p>Finally, delete the <code>default</code> site if there is one.</p>
<pre><code>$ sudo rm /etc/nginx/sites-enabled/default
$ sudo service nginx restart
</code></pre><p>Restart nginx. Your website should be up and running at <code>localhost</code>, <code>ohai.ca foo.ohai.ca 1.2.3.4</code>, or whatever else you have configured.<br>Your Django setup might say “Site matching query does not exist”, but this is a <em>very</em> easy fix.</p>
<h2 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h2><p>If you want your “production” server (i.e. running on port 80) to have <code>DEBUG</code> set to off, you can either <a href="https://stackoverflow.com/a/88331/1558430" target="_blank" rel="external">use a package that does it</a>, or make a <code>myproject/settings/__init__.py</code> that tricks Django into loading a specific settings file.</p>
<pre><code>myproject/
    settings/
        __init__.py  # if some_condition (e.g. hostname): from production import *
        production.py
        development.py
</code></pre><h2 id="Reloading-your-web-site-code-without-downtime"><a href="#Reloading-your-web-site-code-without-downtime" class="headerlink" title="Reloading your web site code without downtime"></a>Reloading your web site code without downtime</h2><p>Follow <a href="http://docs.gunicorn.org/en/stable/faq.html#how-do-i-reload-my-application-in-gunicorn" target="_blank" rel="external">the official advice</a> and send a SIGHUP to your gunicorn process:</p>
<pre><code>kill -HUP masterpid
</code></pre>
    
	</div>
	<footer class="entry-footer">
		<div class="entry-meta-footer">
			<span class="category">
				
			</span>
			<span class="tags">
				
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="">Learning</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="../Software-Development/">Software Development</a></li></ul>

			</span>
		</div>
	</footer>
	
</article>


	<hr class="article-devider">




  
    <article id="post-TrekkieGod-explains-why-it-is-important-to-fight-against-anti-science-beliefs-and-flat-earth-like-theories" class="post">
	<footer class="entry-meta-header">
		<span class="meta-elements date">
			<a href="/2019/TrekkieGod-explains-why-it-is-important-to-fight-against-anti-science-beliefs-and-flat-earth-like-theories/" class="article-date">
  <time datetime="2019-04-16T16:16:58.000Z" itemprop="datePublished">2019-04-16</time>
</a>
		</span>
		<span class="meta-elements author">Brian</span>
		<div class="commentscount">
			
		</div>
	</footer>
	
	<header class="entry-header">
		
  
    <h1 itemprop="name" class="entry-title">
      <a class="article-title" href="/2019/TrekkieGod-explains-why-it-is-important-to-fight-against-anti-science-beliefs-and-flat-earth-like-theories/">TrekkieGod explains why it is important to fight against anti-science beliefs and flat earth-like theories</a>
    </h1>
  

	</header>
	<div class="entry-content">
		
    	<p><strong>tl;dr</strong>: Ignorance leads to bigotry. And then they vote.</p>
<p>Emphasis mine:</p>
<blockquote>
<p>What real effect (do alternative facts) have on your or their daily life?</p>
</blockquote>
<blockquote>
<p>The effect is so great, I can’t think of a single more important task to undertake.<br>You’re thinking, “who cares if somebody thinks the Earth is flat,” and you’re missing the bigger picture: this is just one symptom of a population incapable of critical thinking.<br>Some people who don’t believe in scientific evidence and think the government is lying to them believe vaccines cause autism. They’re responsible for an increase in the number of measles cases, including in the small percentage of people who were vaccinated, but the vaccine wasn’t effective for them, or can’t be vaccinated for legitimate medical reasons.</p>
</blockquote>
<blockquote>
<p>Some people who don’t believe in scientific evidence and think the government is lying refuse to accept global warming is real. <strong>They’re actively voting against candidates supporting investment in renewable technologies of the future</strong>, and against a carbon tax that would not only help migration towards these technologies, but offset the cost in disaster relief the government is having to spend due to current increase in number and severity of weather events like hurricanes as a result of global warming. It’s an externality of fossil fuels: we’re already paying the carbon tax, in the form of extra expenditures, (…) but we haven’t associated that cost with the fossil fuels, so it looks like it’s cheaper than it is and slows down the switch to green tech.</p>
</blockquote>
<blockquote>
<p>Some people who don’t believe in scientific evidence elect school board members who don’t believe in evolution and require text books that “teach the controversy,” and downplay the scientific evidence. They’re lowering the quality of our public schools.<br>Some people who think all beliefs are the same, and science is just another religion, call educated individuals the “intellectual elite” for acting like they know better than they do. Entirely missing the point that they do. That’s what education is, the gaining of additional knowledge. It’s incredible to me how many people refuse to listen to economists, or climate scientists, or physicists, or evolutionary biologists, because they think their opinion is worth just as much. Simultaneously, these people want an actual lawyer if they go to court, and an actual doctor of they’re sick. Although, there are those who don’t, and they’re even worse: people who chose to defend themselves in court and go to jail when they’re innocent, which is not only an injustice, but it’s a drain on my tax dollars. Parents who refuse to allow a doctor to give a simple treatment that would cure their child in favor of their faith healer, and the child dies instead. These people tend to go to jail too for negligence, and not only was an innocent life lost, it’s again <strong>a drain on my tax dollars</strong>.</p>
</blockquote>
<blockquote>
<p>The type of ignorance is responsible for random acts of violence. A conspiracy nut who believed in pizzagate shot up a pizza parlor in NYC because he believed there was a child sex ring in the basement. There was no basement.</p>
</blockquote>
<blockquote>
<p>This type of ignorance leads to bigots. <strong>There’s nothing wrong with faith, but when they believe their faith is a fact and that they can’t be wrong</strong>, they discriminate against homosexuals, against people of other faiths, against people of no faiths. Polls consistently show Americans would rather vote for a pedophile than an atheist, and considering Roy Moore almost won his election, it’s not hyperbole. He got the votes he did because he pandered to the faith above fact crowd: global warming is a hoax, no abortion, Muslims should not be able to hold office in the US, etc.</p>
</blockquote>
<blockquote>
<p>The flat earthers are just the extreme case of the above. There’s an overlap of the above beliefs, as well as a specific disinclination for voting towards candidates that wasn’t to fund NASA and other studies. We just got a picture of a black hole 54 million light-years away. <strong>You think these people support funding scientific efforts in a field they don’t believe in?</strong></p>
</blockquote>
<blockquote>
<p>But don’t narrow yourself to this specific unscientific belief. The flat earthers are one example. <strong>Willingness to ignore scientific evidence is the problem, no matter what field.</strong> We must fight against it whenever we see it, we must seek to educate, we must seek to find out what causes people to get in that state and restructure education to help prevent it. If we could solve this one problem, we’ll build paradise on Earth. <strong>Every other problem we have is solvable with time, if humans stop denying evidence in favor of what they want to believe.</strong> And it’s hard. I’m not saying I’m better than these people, I’m human too. I know I must do it from time to time, and not realize it. I want people to engage me when it happens, I want them to snap me out of it, and <strong>I want to live with a philosophy of constant questioning of my own convictions</strong> in an attempt to minimize that behavior in me, and make it easier to correct it when it does happen.</p>
</blockquote>
<p>Sources: <a href="https://www.reddit.com/r/bestof/comments/bcezo5/trekkiegod_explains_why_its_important_to_fight/" target="_blank" rel="external">1</a>, <a href="https://snew.notabug.io/r/flatearth/comments/bbolbt/can_anyone_have_a_decent_conversation_with_me/ekp6kce/?context=3" target="_blank" rel="external">2</a>, <a href="https://www.reddit.com/r/bestof/comments/bcezo5/trekkiegod_explains_why_its_important_to_fight/ekrhkhm/" target="_blank" rel="external">3</a></p>

    
	</div>
	<footer class="entry-footer">
		<div class="entry-meta-footer">
			<span class="category">
				
			</span>
			<span class="tags">
				
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="">Learning</a></li></ul>

			</span>
		</div>
	</footer>
	
</article>


	<hr class="article-devider">




  
    <article id="post-SOLID" class="post">
	<footer class="entry-meta-header">
		<span class="meta-elements date">
			<a href="/2019/SOLID/" class="article-date">
  <time datetime="2019-01-10T22:49:38.000Z" itemprop="datePublished">2019-01-10</time>
</a>
		</span>
		<span class="meta-elements author">Brian</span>
		<div class="commentscount">
			
		</div>
	</footer>
	
	<header class="entry-header">
		
  
    <h1 itemprop="name" class="entry-title">
      <a class="article-title" href="/2019/SOLID/">SOLID: Object-Oriented Programming Principles, in English</a>
    </h1>
  

	</header>
	<div class="entry-content">
		
    	<p><a href="https://en.wikipedia.org/wiki/SOLID" target="_blank" rel="external">SOLID</a></p>
<p><strong>Single responsibility principle</strong></p>
<p>Separation of concerns: one part of the code does just one thing. </p>
<p>Don’t make a function that both renders a report and prints it.</p>
<p>Make it three functions: one to render the report, one to print a report, and one to call the two functions.</p>
<p><strong>Open/closed principle</strong></p>
<p><em>“Software entities should be open for extension, but closed for modification”</em>: It just means writing your code (functions/classes) in such a way that you don’t need to change existing code to add new features.</p>
<p>Because you will need to test it if you modify it.</p>
<p><strong>Liskov substitution principle</strong></p>
<p>A class can be replaced with its subclass (“substituted”), and the program should still work the way you expect.</p>
<p>See also: not modifying existing code in open/closed principle.</p>
<p><strong>Interface segregation principle</strong></p>
<p>Don’t make people’s interfaces implement methods they don’t need.</p>
<p>See also: making small interfaces/classes in single responsibility principle.</p>
<p><strong>Dependency inversion principle</strong></p>
<p>Also known as dependency injection; <a href="https://www.reddit.com/r/learnpython/comments/2xoxhx/does_anyone_have_a_good_article_about/" target="_blank" rel="external">give functions what they need, rather than expect them to get what they need themselves.</a></p>

    
	</div>
	<footer class="entry-footer">
		<div class="entry-meta-footer">
			<span class="category">
				
			</span>
			<span class="tags">
				
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="">Learning</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="../Software-Development/">Software Development</a></li></ul>

			</span>
		</div>
	</footer>
	
</article>


	<hr class="article-devider">




  
    <article id="post-唔好衰俾人睇" class="post">
	<footer class="entry-meta-header">
		<span class="meta-elements date">
			<a href="/2017/唔好衰俾人睇/" class="article-date">
  <time datetime="2017-05-01T19:16:00.000Z" itemprop="datePublished">2017-05-01</time>
</a>
		</span>
		<span class="meta-elements author">Brian</span>
		<div class="commentscount">
			
		</div>
	</footer>
	
	<header class="entry-header">
		
  
    <h1 itemprop="name" class="entry-title">
      <a class="article-title" href="/2017/唔好衰俾人睇/">唔好衰俾人睇</a>
    </h1>
  

	</header>
	<div class="entry-content">
		
    	<p>There is a culture out there, that places immense emphasis on never failing. Where this culture predominates, failure is considered a permanent, irreversible loss of a thing called “面” (<em>min2</em>, lit. face), as well as one’s limited time left on Earth. Once you lose your face, you are said to have no face (“無面”, lit. no face). And without a face, you cannot face your parents (“對唔住”, lit. cannot face). However abstracted the words might have become over the years, their underlying meaning that <em>one must not fail</em> is deeply ingrained into the population’s minds.</p>
<p>Numerous people observe this culture. If you fail, not only does it shame you, it shames your entire family, ancestry, and/or surname. A failure on your part gives off a vibe that your parents did not raise you properly. Perhaps true, perhaps not. Nevertheless, because failure introduces such amount of shame, the people would go great lengths into ensuring things are completed successfully, no matter how competitive (for tests), harmful (for pulling all-nighters), or unethical (for polluting the environment).</p>
<p>And, of course, since everyone around you is going great lengths to avoid failure, you mirror their behaviours and also go great lengths to avoid failure. And not only do you conform to this behaviour, your parents, under great pressure not to be ashamed, also reinforce the standards you impose on yourself. <strong>It is a positive vicious cycle. You must not fail.</strong></p>
<p>The problem, however, cannot be solved simply with the power of shame. Suppose you are taking a test with 99 other people in this culture. Everyone is in the exam room, having studied weeks before, not pressured by success, but simply pressured by the possibility of shaming their parents. However well these 100 people do in this test, the distribution will still be bell-curved. Therefore, there will always be a percentage of people out there who are expected to put their families to shame. These people will then be called failures (“廢柴”, lit. useless firewood). People see these failures and call them as such. There is huge incentive for individuals and their families to hide these failures from others, so these failures are never seen. This is called (“衰俾人睇”, lit. fail for people to see).</p>
<p>Another way of looking at this, is that <a href="https://www.ted.com/playlists/152/what_is_success" target="_blank" rel="external">there is no such thing as work-life balance. You cannot have it all.</a> Therefore, if you succeed in one thing, you must have made some compromise by not succeeding in many other things. This has a strange, unrelated effect where people jump out of buildings a lot.</p>
<p>What happens if a society changes from “you should succeed” (“你要出人投地”, lit. you have to exit a man and throw the ground), to “you must not fail” (“唔好衰俾人睇”, lit. don’t fail for people to see)? For starters, fewer people think about success. Rarely do they stop and think about the future, thinking, <a href="http://www.schwarzenegger.com/" target="_blank" rel="external">“I want to be the world’s best bodybuilder,”</a> or “I want to make America great again”. Instead, the failure-averted often go to great lengths to ensure the odds for a predetermined event to be ever in their favour. Your parents loave your failures, rather than celebrate your successes.</p>
<p>Fool me once, shame on you; fool me twice, shame on me. This goes for failures in reverse: Fail your parents once, shame on you. Fail your parents twice, shame on them. If you fail your parents more than twice, they think you are failures. And because everyone statistically fails more than twice, <strong>all your parents think you are failures.</strong></p>
<p>You must not fail.</p>

    
	</div>
	<footer class="entry-footer">
		<div class="entry-meta-footer">
			<span class="category">
				
  <div class="article-category">
    <a class="article-category-link" href="../../categories/Personal/">Personal</a>
  </div>

			</span>
			<span class="tags">
				
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="">Learning</a></li></ul>

			</span>
		</div>
	</footer>
	
</article>


	<hr class="article-devider">




  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="page/2/">2</a><a class="page-number" href="page/3/">3</a><a class="extend next" rel="next" href="page/2/">Next &raquo;</a>
    </nav>
  

    </div>
    <div class="mb-search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:blog.ohai.ca">
  </form>
</div>
<footer id="footer">
	<h1 class="footer-blog-title">
		<a href="/">Brian&#39;s Blog</a>
	</h1>
	<span class="copyright">
		&copy; 2021 Brian<br>
		Modify from <a href="http://sanographix.github.io/tumblr/apollo/" target="_blank">Apollo</a> theme, designed by <a href="http://www.sanographix.net/" target="_blank">SANOGRAPHIX.NET</a><br>
		Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
	</span>
</footer>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>



<script src="../../js/script.js"></script>
  </div>

  <script type="text/javascript">
    //<![CDATA[
    var sc_project=4446854;
    var sc_invisible=0;
    var sc_security="74785e80";
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write(
      "<sc"+"ript type='text/javascript' src='" +
      scJsHost +
      "statcounter.com/counter/counter_xhtml.js'></" +
      "script>"
    );
    //]]>
  </script>
  <noscript>
    <img style="display: none"
         src="http://c.statcounter.com/4446854/0/74785e80/0/" />
  </noscript><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
</body>
</html>
